{"version":3,"sources":["serviceWorker.js","data/tile_data.js","data/warp_data.js","map-components.js","map-logic.js","download-helpers.js","editors/base-editor.js","utilities.js","editors/map-editor.js","editors/layout-editor.js","evaluator-components.js","editors/eval-editor.js","index.js"],"names":["Boolean","window","location","hostname","match","PLANET_TRAITS","TECH_SPECIALTIES","ANOMALIES","WORMHOLES","planet_data","system_data","WARP_DIRECTIONS","warp_configs","NORTH","SOUTHEAST","SOUTH","SOUTHWEST","NORTHEAST","NORTHWEST","getHexSizeFromScreen","innerWidth","SystemBankComponent","int_select","document","getElementById","options","selectedIndex","value","new_value","this","getSelectValue","props","setActiveSystem","systems","getSystemByID","parseInt","hexSize","key","system","push","id","getStringName","selected_value","system_to_display","className","active_system","format","system_format","posStyle","onClick","draggable","onDrag","event","onSelectedSystemDrag","onDragEnd","onSystemDragEnd","onDrop","onSystemDropped","eval_variables","onDragOver","preventDefault","onChange","handleSelectChange","disabled","selectNoSystems","React","Component","MapComponent","state","system_box","setState","Object","assign","updateDimensions","addEventListener","bind","removeEventListener","mapHeight","hexSpace","mapWidth","mapCenterH","mapCenterV","display","index","space","is_draggable","type","MAP_SPACE_TYPES","SYSTEM","systems_draggable","isMecatolRexSystem","home_value","HOME","home_values","toString","clickedSpace","onSystemDrag","map","spaces","entries","mapStyle","map_class","style","HexComponent","onDragStart","hexClass","points","svgElements","children","MapSpaceComponent","spaceOffsetV","spaceOffsetH","x","y","z","getPositionStyle","OPEN","home_text","CLOSED","WARP","warps","warp_spaces","WarpComponent","coords","warp_lines","one_warp","start_coords","get_endpoint_coords","end_coords","x1","y1","x2","y2","SYSTEM_FORMATS","SystemComponent","id_div","extras","value_div","isBlue","evaluate","wormhole","anomaly","rex_class","hex_props","ID_ONLY","STREAMLINED_WITH_NAME","planets","planet","name","PLANET_FORMATS","STREAMLINED","COLORBLIND_FRIENDLY","COLORBLIND_FRIENDLY_WITH_NAME","PlanetComponent","trait_class","trait_abbr","trait","tech_class","tech_abbr","tech_specialty","name_stuff","values","resources","influence","PLANET_EVAL_STRATEGIES","Planet","obj_data","variables","v","data","BASE_PLANET_MOD","r","RESOURCES_MULTIPLIER","i","INFLUENCE_MULTIPLIER","t","TECH_MOD","TECH_WARFARE_MOD","TECH_PROPULSION_MOD","TECH_BIOTIC_MOD","TECH_CYBERNETIC_MOD","PLANET_STRATEGY","GREATEST","to_add","AVERAGE","high_one","NONZERO_RESOURCES_MOD","NONZERO_INFLUENCE_MOD","TRAIT_CULTURAL_MOD","TRAIT_HAZARDOUS_MOD","TRAIT_INDUSTRIAL_MOD","PlanetBox","one_planet_data","one_planet","System","planet_box","planet_name","plToAdd","getPlanetByName","length","SINGLE_PLANET_MOD","MULTI_PLANET_MOD","MATCHING_PLANETS_MOD","NONMATCHING_PLANETS_MOD","MECATOL_REX_SYS_MOD","DISTANCE_MOD_BASE","DISTANCE_MOD_PLANET","DISTANCE_MOD_PLANET_WORMHOLE","DISTANCE_MOD_EMPTY_WORMHOLE","DISTANCE_MOD_EMPTY","DISTANCE_MOD_ASTEROID_FIELD","DISTANCE_MOD_GRAVITY_RIFT","DISTANCE_MOD_NEBULA","DISTANCE_MOD_SUPERNOVA","isRed","name_array","join","SystemBox","one_system_data","total","splice","sysindex","getSystemIndexByID","new_system_box","one_system","systems_to_return","one_sys","getDistanceMultiplier","modded_distance","d","DISTANCE_MULTIPLIER","Map","load_default","starting_space","iterations","addAdjacentSpaces","new_map","one_space","new_space","MapSpace","system_id","getSpaceBySystemID","one_warp_dir","doesWarpDirectionConnect","warp_direction","checked_spaces","spaceItGoes","getObjFromCoord","getWarpDirectionCoordinates","areCoordsInList","oppositeDirection","directions_to_check","one_next_warp","one_direction","is_legal","map_space","getAdjacentSystems","home_total","spaces_to_get_to","shortest_distance","_getShortestModdedDistance","start_space","dest_space","finished_paths","act_paths","first_steps","getAdjacentSystemsIncludingWormholes","one_step","getDistanceModifier","getMapDistanceModifier","new_path","new_active_paths","one_path","results","_extendPath","finished","one_done","ongoing","one_ongoing","first_yet","shortest","path_length","_calculateModdedDistanceFromRaw","path","completed_paths","ongoing_paths","last_step","next_steps","path_copy","modded_dist","one_index","adj_spaces","getAdjacentSpacesIncludingWormholes","DISTANCE_MOD_ADJACENT_TO_OPPONENT","coords_to_add","adjacent_coords","getAdjacentCoordinates","one_adjacent_coords","one_coords_to_add","system_space","warp_space","adj_systems","direction_from","warps_to_follow","one_warp_direction","next_space","farther_systems","_getAdjacentSpacesThroughWarps","one_far_sys","getAdjacentSpaces","adj_coords","potential_space","potential_systems","one_system_space","wh_systems","getMatchingWormholeSpaces","one_whs","matching_spaces","list","existing_coords","JSONDownloadButton","string","downloadInfo","getDownloadInfo","filename","text","element","createElement","setAttribute","encodeURIComponent","body","appendChild","click","removeChild","download","replace","toLowerCase","JSON","stringify","downloadJSON","title","JSONUploadButton","fr","FileReader","readAsText","files","onload","oFREvent","handleJSON","parse","target","result","handleUpload","jQuery","$","BaseEditor","default_layouts","ls","get","storage_key","getNewStringValue","one_space_data","space_system","spaces_data","space_data","l_title","val","getJSONDataFromSpaces","getCurrentLayoutJSON","subject_plural","selected_item","getLayoutFromJSON","loadedTitle","new_message","subject","setMap","saved_data","dataToSave","set","setLayout","currentIndex","new_selected","split","toDel","getNewLayout","remove","syncBankSystems","compareByID","a","b","MapEditor","starting_layout","selected_bank_system","draggedSystem","option_pair_wormholes","option_include_all_wormholes","target_blue_total","bank_systems","eval_option","default_variables","balance_difference","map_string","balance_options","long_op","eval_var","isComplete","getHomeValues","getBalanceDifference","getMapString","containsSystem","sort","new_check","getSelectNewMapValue","getSelectNewMapType","loadCustomLayout","loadDefault","valIndex","e_kind","e_index","e_var","eval_storage_key","substr","message","space_index","makeCopy","is_changed","old_space","replaced_system","isChecked","checked","int_value","toLoad","layout_storage_key","final_string","is_first","map_string_order","one_coor","new_bank","id_list","one_id_string","one_id","newState","isChanged","replacement_system","setTimeout","autoComplete","map_history","gotamap","_autoCompleteSteps","current_history","steps_forward","current_try_total","backwards_length","starting_length","tries","new_history","_addOneSystem","steps_forward_add","pop","newest_history","avail_sys_pool","can_add","getWormholeSystems","getOpenSpacesTotal","total_needed","b_holes","a_holes","target_ratio","getPossibleSystemTotal","current_ratio","getBlueSystemTotal","getRedSystemTotal","replacement_pool","chosen_system","Math","floor","random","avail_space_pool","chosen_space_index","new_box","isLegal","evars","getHomeValue","max","min","one_home_key","hasOwnProperty","which_option","improveBalance","Promise","resolve","eligible_system_spaces","dont_move_wormholes","dont_move_anomalies","dont_move_empty","j","shuffle","found_it","new_hv","new_diff","is_complete","one_default","one_custom_l","areWarpsLogical","one_saved","eval_options","one_custom","auto_complete_ratios","red_total","blue_total","open_spaces","blue_avail","red_avail","s","bal_diff","getAllLayoutJSONFileInfo","deleteAll","addLayoutsFromJSON","input_title","saveCurrent","deleteCurrent","isSelectNew","getCurrentLayoutJSONFileInfo","handleFormatDisplayChange","loadMapFromString","handleIncludeWormholesChange","htmlFor","handlePairWormholesChange","handleTargetRatioChange","autoCompleteStart","handleEvalChange","handleBalanceOptionChange","improveBalanceStart","setActiveBankSystem","LayoutEditor","show_warps","show_wormholes","show_anomalies","setNewLayout","go_next_type","_getNextWarp","_getNextSystem","keep_going","proposed_warp","proposed_config","one_coord","eligible_systems","current_id","defaults","handleWarpChange","handleWormholeChange","handleAnomaliesChange","EVAL_ASPECTS","EvaluatorLine","null_box","nul_val","num_value","hasNullBox","onNullChange","label","m","onInputChange","helperText","EvaluatorForm","which_aspect","distance","changeHandler","reportChange","SUM","GREATEST_PLUS_TECH","reportNullChange","EvaluationEditor","default_evaluators","new_values","setValuesFull","new_eval","setValues","SCREENS","MapLabNavigator","MAP_EDITOR","new_screen","screen_return","active_screen","LAYOUT_EDITOR","SYSTEM_EVALUATOR","INSTRUCTIONS","class","role","aria-label","aria-expanded","toggleClass","aria-hidden","changeScreen","href","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.0fa71690.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export const PLANET_TRAITS = {\n    \"HAZARDOUS\": 0,\n    \"INDUSTRIAL\": 1,\n    \"CULTURAL\": 2,\n};\n\nexport const TECH_SPECIALTIES = {\n    \"BIOTIC\": 0,\n    \"WARFARE\": 1,\n    \"PROPULSION\": 2,\n    \"CYBERNETIC\": 3,\n};\n\nexport const ANOMALIES = {\n    \"NEBULA\": 0,\n    \"GRAVITY_RIFT\": 1,\n    \"ASTEROID_FIELD\": 2,\n    \"SUPERNOVA\": 3,\n};\n\nexport const WORMHOLES = {\n    \"ALPHA\": 0,\n    \"BETA\": 1,\n    \"DELTA\": 2,\n};\n\nexport let planet_data = [\n    {\n        \"name\": \"Mecatol Rex\",\n        \"trait\": null,\n        \"tech_specialty\": null,\n        \"resources\": 1,\n        \"influence\": 6,\n    },\n    {\n        \"name\": \"Abyz\",\n        \"trait\": PLANET_TRAITS.HAZARDOUS,\n        \"tech_specialty\": null,\n        \"resources\": 3,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Fria\",\n        \"trait\": PLANET_TRAITS.HAZARDOUS,\n        \"tech_specialty\": null,\n        \"resources\": 2,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Arinam\",\n        \"trait\": PLANET_TRAITS.INDUSTRIAL,\n        \"tech_specialty\": null,\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Meer\",\n        \"trait\": PLANET_TRAITS.HAZARDOUS,\n        \"tech_specialty\": TECH_SPECIALTIES.WARFARE,\n        \"resources\": 0,\n        \"influence\": 4,\n    },\n    {\n        \"name\": \"Arnor\",\n        \"trait\": PLANET_TRAITS.INDUSTRIAL,\n        \"tech_specialty\": null,\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Lor\",\n        \"trait\": PLANET_TRAITS.INDUSTRIAL,\n        \"tech_specialty\": null,\n        \"resources\": 2,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Bereg\",\n        \"trait\": PLANET_TRAITS.HAZARDOUS,\n        \"tech_specialty\": null,\n        \"resources\": 3,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Lirta IV\",\n        \"trait\": PLANET_TRAITS.HAZARDOUS,\n        \"tech_specialty\": null,\n        \"resources\": 2,\n        \"influence\": 3,\n    },\n    {\n        \"name\": \"Centauri\",\n        \"trait\": PLANET_TRAITS.CULTURAL,\n        \"tech_specialty\": null,\n        \"resources\": 1,\n        \"influence\": 3,\n    },\n    {\n        \"name\": \"Gral\",\n        \"trait\": PLANET_TRAITS.INDUSTRIAL,\n        \"tech_specialty\": TECH_SPECIALTIES.PROPULSION,\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Corneeq\",\n        \"trait\": PLANET_TRAITS.CULTURAL,\n        \"tech_specialty\": null,\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Resculon\",\n        \"trait\": PLANET_TRAITS.CULTURAL,\n        \"tech_specialty\": null,\n        \"resources\": 2,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Dal Bootha\",\n        \"trait\": PLANET_TRAITS.CULTURAL,\n        \"tech_specialty\": null,\n        \"resources\": 0,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Xxehan\",\n        \"trait\": PLANET_TRAITS.CULTURAL,\n        \"tech_specialty\": null,\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Lazar\",\n        \"trait\": PLANET_TRAITS.INDUSTRIAL,\n        \"tech_specialty\": TECH_SPECIALTIES.CYBERNETIC,\n        \"resources\": 1,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Sakulag\",\n        \"trait\": PLANET_TRAITS.HAZARDOUS,\n        \"tech_specialty\": null,\n        \"resources\": 2,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Lodor\",\n        \"trait\": PLANET_TRAITS.INDUSTRIAL,\n        \"tech_specialty\": null,\n        \"resources\": 3,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Mehar Xull\",\n        \"trait\": PLANET_TRAITS.HAZARDOUS,\n        \"tech_specialty\": TECH_SPECIALTIES.WARFARE,\n        \"resources\": 1,\n        \"influence\": 3,\n    },\n    {\n        \"name\": \"Mellon\",\n        \"trait\": PLANET_TRAITS.CULTURAL,\n        \"tech_specialty\": null,\n        \"resources\": 0,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Zohbat\",\n        \"trait\": PLANET_TRAITS.HAZARDOUS,\n        \"tech_specialty\": null,\n        \"resources\": 3,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"New Albion\",\n        \"trait\": PLANET_TRAITS.INDUSTRIAL,\n        \"tech_specialty\": TECH_SPECIALTIES.BIOTIC,\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Starpoint\",\n        \"trait\": PLANET_TRAITS.HAZARDOUS,\n        \"tech_specialty\": null,\n        \"resources\": 3,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Quann\",\n        \"trait\": PLANET_TRAITS.CULTURAL,\n        \"tech_specialty\": null,\n        \"resources\": 2,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Qucen'n\",\n        \"trait\": PLANET_TRAITS.INDUSTRIAL,\n        \"tech_specialty\": null,\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Rarron\",\n        \"trait\": PLANET_TRAITS.CULTURAL,\n        \"tech_specialty\": null,\n        \"resources\": 0,\n        \"influence\": 3,\n    },\n    {\n        \"name\": \"Saudor\",\n        \"trait\": PLANET_TRAITS.INDUSTRIAL,\n        \"tech_specialty\": null,\n        \"resources\": 2,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Tar'Mann\",\n        \"trait\": PLANET_TRAITS.INDUSTRIAL,\n        \"tech_specialty\": TECH_SPECIALTIES.BIOTIC,\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Tequ'ran\",\n        \"trait\": PLANET_TRAITS.HAZARDOUS,\n        \"tech_specialty\": null,\n        \"resources\": 2,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Torkan\",\n        \"trait\": PLANET_TRAITS.CULTURAL,\n        \"tech_specialty\": null,\n        \"resources\": 0,\n        \"influence\": 3,\n    },\n    {\n        \"name\": \"Thibah\",\n        \"trait\": PLANET_TRAITS.INDUSTRIAL,\n        \"tech_specialty\": TECH_SPECIALTIES.PROPULSION,\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Vefut II\",\n        \"trait\": PLANET_TRAITS.HAZARDOUS,\n        \"tech_specialty\": null,\n        \"resources\": 2,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Wellon\",\n        \"trait\": PLANET_TRAITS.INDUSTRIAL,\n        \"tech_specialty\": TECH_SPECIALTIES.CYBERNETIC,\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n\n];\n\nexport let system_data = [\n    {\n        \"id\": 18,\n        \"planets\": [\"Mecatol Rex\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 39,\n        \"planets\": [],\n        \"anomaly\": null,\n        \"wormhole\": WORMHOLES.ALPHA\n    },\n    {\n        \"id\": 43,\n        \"planets\": [],\n        \"anomaly\": ANOMALIES.SUPERNOVA,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 46,\n        \"planets\": [],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 49,\n        \"planets\": [],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 44,\n        \"planets\": [],\n        \"anomaly\": ANOMALIES.ASTEROID_FIELD,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 40,\n        \"planets\": [],\n        \"anomaly\": null,\n        \"wormhole\": WORMHOLES.BETA\n    },\n    {\n        \"id\": 48,\n        \"planets\": [],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 45,\n        \"planets\": [],\n        \"anomaly\": ANOMALIES.ASTEROID_FIELD,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 47,\n        \"planets\": [],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 42,\n        \"planets\": [],\n        \"anomaly\": ANOMALIES.NEBULA,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 50,\n        \"planets\": [],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 41,\n        \"planets\": [],\n        \"anomaly\": ANOMALIES.GRAVITY_RIFT,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 32,\n        \"planets\": [\"Dal Bootha\", \"Xxehan\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 26,\n        \"planets\": [\"Lodor\"],\n        \"anomaly\": null,\n        \"wormhole\": WORMHOLES.ALPHA\n    },\n    {\n        \"id\": 29,\n        \"planets\": [\"Qucen'n\", \"Rarron\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 38,\n        \"planets\": [\"Abyz\", \"Fria\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 22,\n        \"planets\": [\"Tar'Mann\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 21,\n        \"planets\": [\"Thibah\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 33,\n        \"planets\": [\"Corneeq\", \"Resculon\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 19,\n        \"planets\": [\"Wellon\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 28,\n        \"planets\": [\"Tequ'ran\", \"Torkan\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 24,\n        \"planets\": [\"Mehar Xull\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 37,\n        \"planets\": [\"Arinam\", \"Meer\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 30,\n        \"planets\": [\"Mellon\", \"Zohbat\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 20,\n        \"planets\": [\"Vefut II\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 27,\n        \"planets\": [\"New Albion\", \"Starpoint\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 23,\n        \"planets\": [\"Saudor\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 31,\n        \"planets\": [\"Lazar\", \"Sakulag\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 35,\n        \"planets\": [\"Bereg\", \"Lirta IV\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 34,\n        \"planets\": [\"Centauri\", \"Gral\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 36,\n        \"planets\": [\"Arnor\", \"Lor\"],\n        \"anomaly\": null,\n        \"wormhole\": null\n    },\n    {\n        \"id\": 25,\n        \"planets\": [\"Quann\"],\n        \"anomaly\": null,\n        \"wormhole\": WORMHOLES.BETA\n    },\n];\n\n","export const WARP_DIRECTIONS = {\n    \"NORTH\": {\"x\": 0, \"y\": 1, \"z\": -1},\n    \"NORTHEAST\": {\"x\": 1, \"y\": 0, \"z\": -1},\n    \"SOUTHEAST\": {\"x\": 1, \"y\": -1, \"z\": 0},\n    \"SOUTH\": {\"x\": 0, \"y\": -1, \"z\": 1},\n    \"SOUTHWEST\": {\"x\": -1, \"y\": 0, \"z\": 1},\n    \"NORTHWEST\": {\"x\": -1, \"y\": 1, \"z\": 0},\n};\n\nexport let warp_configs = [\n    [\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTHEAST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTH],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.SOUTH],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.SOUTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.NORTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.SOUTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.NORTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTH, WARP_DIRECTIONS.NORTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTHEAST],\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTH],\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.NORTHWEST],\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.SOUTH],\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.SOUTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.NORTH],\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.NORTHWEST],\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.SOUTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTH, WARP_DIRECTIONS.NORTH],\n        [WARP_DIRECTIONS.SOUTH, WARP_DIRECTIONS.NORTHWEST],\n        [WARP_DIRECTIONS.SOUTH, WARP_DIRECTIONS.NORTHEAST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTHWEST, WARP_DIRECTIONS.NORTH],\n        [WARP_DIRECTIONS.SOUTHWEST, WARP_DIRECTIONS.NORTHEAST],\n        [WARP_DIRECTIONS.SOUTHWEST, WARP_DIRECTIONS.SOUTHEAST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHWEST, WARP_DIRECTIONS.SOUTHEAST],\n        [WARP_DIRECTIONS.NORTHWEST, WARP_DIRECTIONS.SOUTH],\n        [WARP_DIRECTIONS.NORTHWEST, WARP_DIRECTIONS.NORTHEAST],\n    ],\n];","import React from 'react';\nimport {ANOMALIES, PLANET_TRAITS, TECH_SPECIALTIES, WORMHOLES} from \"./data/tile_data\";\nimport {warp_configs, WARP_DIRECTIONS} from \"./data/warp_data\";\n\nconst hexSpace = 6;\n\nfunction getHexSizeFromScreen() {\n    if(window.innerWidth >= 1024) {\n        return 110;\n    } else if(window.innerWidth >= 769) {\n        return 80;\n    } else {\n        return 55;\n    }\n}\n\nexport class SystemBankComponent extends React.Component {\n\n    getSelectValue() {\n        let int_select = document.getElementById(\"system-bank-select\");\n        return int_select.options[int_select.selectedIndex].value;\n    }\n\n    handleSelectChange() {\n        let new_value = this.getSelectValue();\n        if(new_value === \"none\") {\n            this.props.setActiveSystem(null);\n        } else {\n            this.props.setActiveSystem(\n                this.props.systems.getSystemByID(parseInt(new_value))\n            );\n        }\n    }\n\n    selectNoSystems() {\n        this.props.setActiveSystem(null);\n    }\n\n    render() {\n        let hexSize = getHexSizeFromScreen();\n\n        let options = [(<option value=\"none\" key=\"sys_none\">(none)</option>)];\n        for(let system of this.props.systems.systems) {\n            options.push(<option\n                value={system.id} key={\"sys_\"+system.id}\n            >{system.getStringName()}</option>)\n        }\n\n        let selected_value = \"none\";\n        let system_to_display = (<span className=\"hex-container\"></span>);\n        if(this.props.active_system!==null) {\n            selected_value = this.props.active_system.id;\n            system_to_display = (\n                <SystemComponent\n                    system={this.props.active_system}\n                    format={this.props.system_format}\n                    posStyle={{\"position\": \"relative\"}}\n                    onClick={()=>{}}\n                    hexSize={hexSize}\n                    draggable={true}\n                    onDrag={(event)=>this.props.onSelectedSystemDrag(event)}\n                    onDragEnd={(event)=>this.props.onSystemDragEnd(event)}\n                    onDrop={(event)=>this.props.onSystemDropped(event)}\n                    eval_variables={this.props.eval_variables}\n                />\n            );\n        }\n\n        return(\n                <div\n                    className=\"system-bank field\"\n                    onDragOver={(event)=>{event.preventDefault();}}\n                    onDrop={(event)=>this.props.onSystemDropped(event)}\n                >\n                    <label className=\"label\">\n                        System Bank\n                    </label>\n                    <p className=\"control\">\n                        <span className=\"select is-small\">\n                            <select\n                                id=\"system-bank-select\"\n                                value={selected_value}\n                                onChange={()=>this.handleSelectChange()}\n                            >\n                                {options}\n                            </select>\n                        </span>\n                    </p>\n                    <p className=\"control\">\n                        <button\n                            disabled={this.props.active_system===null}\n                            onClick={()=>this.selectNoSystems()}\n                            className=\"button is-small\"\n                        >\n                            Select None\n                        </button>\n                    </p>\n                    <div className=\"control\">\n                        {system_to_display}\n                    </div>\n                </div>\n        );\n    }\n}\n\nexport class MapComponent extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            \"system_format\": this.props.system_format,\n            \"hexSize\": getHexSizeFromScreen(),\n        };\n        this.system_box = this.props.system_box;\n    }\n\n    updateDimensions() {\n        this.setState(Object.assign({}, this.state, {\"hexSize\": getHexSizeFromScreen()}));\n    }\n\n    componentDidMount() {\n        this.updateDimensions();\n        window.addEventListener(\"resize\", this.updateDimensions.bind(this));\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"resize\", this.updateDimensions.bind(this));\n    }\n\n\n    render() {\n        let hexSize = this.state.hexSize;\n        let mapHeight = hexSize*.866*7 + hexSpace*6;\n        let mapWidth = hexSize*5.5 + hexSpace*6;\n        let mapCenterH = mapWidth/2;\n        let mapCenterV = mapHeight/2;\n        let display=[];\n        for(let [index, space] of this.props.map.spaces.entries()) {\n            let is_draggable=false;\n            if(space.type===MAP_SPACE_TYPES.SYSTEM && this.props.systems_draggable) {\n                if(!space.system.isMecatolRexSystem()) is_draggable=true;\n            }\n            let home_value = null;\n            if(\n                space.type===MAP_SPACE_TYPES.HOME\n                &&\n                this.props.home_values !== null\n                &&\n                (this.props.home_values && index.toString() in this.props.home_values)\n            ) {\n                home_value = this.props.home_values[index.toString()];\n            }\n\n            display.push(\n                <MapSpaceComponent\n                    space={space}\n                    key={\"map_space_\"+index}\n                    system_format={this.props.system_format}\n                    onClick={()=>this.props.clickedSpace(index)}\n                    hexSize={hexSize}\n                    mapCenterH={mapCenterH}\n                    mapCenterV={mapCenterV}\n                    draggable={is_draggable}\n                    onDrag={(event)=>this.props.onSystemDrag(event, space.system)}\n                    onDragEnd={(event)=>this.props.onSystemDragEnd(event)}\n                    onDrop={(event)=>{if(this.props.systems_draggable) this.props.onSystemDropped(event, index);}}\n                    eval_variables={this.props.eval_variables}\n                    home_value={home_value}\n                />\n            );\n        }\n\n        let mapStyle = {\n            \"width\": mapWidth+\"px\",\n            \"height\": mapHeight+\"px\",\n        };\n        return (\n            <div className={\"map \"+this.props.map_class} style={mapStyle}>\n                {display}\n            </div>\n        );\n    }\n}\n\nexport const MAP_SPACE_TYPES = {\n    \"OPEN\": 1,\n    \"HOME\": 2,\n    \"SYSTEM\": 3,\n    \"CLOSED\": 4,\n    \"WARP\": 5,\n};\n\nexport class HexComponent extends React.Component {\n    onDrop(event) {\n        if(this.props.onDrop) {\n            this.props.onDrop(event);\n        }\n    }\n\n    render() {\n        let hexSize = this.props.hexSize;\n        return(\n            <div\n                className=\"hex-container\"\n                style={this.props.posStyle}\n                draggable={this.props.draggable}\n                onDragStart={(event)=>this.props.onDrag(event)}\n                onDragEnd={(event)=>this.props.onDragEnd(event)}\n            >\n                <svg className=\"shape-container\">\n                    <polygon\n                        onClick={()=>this.props.onClick()}\n                        className={\"hexagon \"+this.props.hexClass}\n                        points={\n                            (hexSize)+\", \"+(hexSize*.433)+\" \"+\n                            (hexSize*.75)+\", \"+(hexSize*.866)+\" \"+\n                            (hexSize*.25)+\", \"+(hexSize*.866)+\" \"+\n                            \"0, \"+(hexSize*.433)+\" \"+\n                            (hexSize*.25)+\", 0 \"+\n                            (hexSize*.75)+\", 0\"\n                        }\n                    >\n                    </polygon>\n                    {this.props.svgElements}\n                </svg>\n                <div\n                    className={\"hex-content \"+this.props.hexClass}\n                    onClick={()=>this.props.onClick()}\n                    onDragOver={(event)=>{event.preventDefault();}}\n                    onDrop={(event)=>this.onDrop(event)}\n                >\n                    {this.props.children}\n                </div>\n            </div>\n\n        );\n    }\n}\n\nexport class MapSpaceComponent extends React.Component {\n    getPositionStyle() {\n        let hexSize = this.props.hexSize;\n        let mapCenterH = this.props.mapCenterH;\n        let mapCenterV = this.props.mapCenterV;\n        let spaceOffsetV = hexSize *.5*.866;\n        let spaceOffsetH = hexSize*.5;\n        let x = this.props.space.x;\n        let y = this.props.space.y;\n        let z = this.props.space.z;\n\n        let xhmod = x*hexSize*.75/2 + x*hexSpace*.5;\n        let xvmod = 0;\n        let yhmod = -y*hexSize*.75/2 - y*hexSpace*.5;\n        let yvmod = -y*(hexSize*.866/2) - y*(hexSpace/2);\n        let zhmod = -z*hexSize*.75/2 - z*hexSpace*.5;\n        let zvmod = z*(hexSize*.866/2) + z*(hexSpace/2);\n\n        let left = mapCenterH - spaceOffsetH + xhmod + yhmod + zhmod;\n        let top = mapCenterV - spaceOffsetV + xvmod + yvmod + zvmod;\n\n        return {\"left\": left+\"px\", \"top\": top+\"px\"};\n    }\n\n    render() {\n        let display = null;\n        let type = this.props.space.type;\n        let posStyle = this.getPositionStyle();\n        switch(type) {\n            case MAP_SPACE_TYPES.OPEN:\n                display = (\n                    <HexComponent\n                        onClick={()=>this.props.onClick()}\n                        posStyle={posStyle}\n                        hexSize={this.props.hexSize}\n                        hexClass=\"open\"\n                        onDrop={(event)=>this.props.onDrop(event)}\n                    >\n                        +\n                    </HexComponent>\n                );\n                break;\n            case MAP_SPACE_TYPES.HOME:\n                let home_text = \"H\";\n                if(this.props.home_value !== null) {\n                    home_text = this.props.home_value;\n                }\n                display = (\n                    <HexComponent\n                        onClick={()=>this.props.onClick()}\n                        posStyle={posStyle}\n                        hexSize={this.props.hexSize}\n                        hexClass=\"home\"\n                    >\n                        {home_text}\n                    </HexComponent>\n                );\n                break;\n            case MAP_SPACE_TYPES.SYSTEM:\n                display = (\n                    <SystemComponent\n                        system={this.props.space.system}\n                        format={this.props.system_format}\n                        posStyle={posStyle}\n                        onClick={()=>this.props.onClick()}\n                        hexSize={this.props.hexSize}\n                        draggable={this.props.draggable}\n                        onDrag={(event)=>this.props.onDrag(event)}\n                        onDragEnd={(event)=>this.props.onDragEnd(event)}\n                        onDrop={(event)=>this.props.onDrop(event)}\n                        eval_variables={this.props.eval_variables}\n                    />\n                );\n                break;\n            case MAP_SPACE_TYPES.CLOSED:\n                display = (\n                    <HexComponent\n                        onClick={()=>this.props.onClick()}\n                        posStyle={posStyle}\n                        hexSize={this.props.hexSize}\n                        hexClass=\"closed\"\n                    >\n                    </HexComponent>\n                );\n                break;\n            case MAP_SPACE_TYPES.WARP:\n                display = (\n                    <WarpComponent\n                        posStyle={posStyle}\n                        onClick={()=>this.props.onClick()}\n                        warps={this.props.space.warp_spaces}\n                        hexSize={this.props.hexSize}\n                    />\n                );\n                break;\n            default:\n                break;\n        }\n        return display;\n    }\n}\n\nexport class WarpComponent extends React.Component {\n    get_endpoint_coords(coords, hexSize) {\n        switch(coords) {\n            case WARP_DIRECTIONS.NORTH:\n                return {\n                    \"x\": hexSize*.5,\n                    \"y\": 0,\n                };\n            case WARP_DIRECTIONS.NORTHEAST:\n                return {\n                    \"x\": hexSize*(7/8),\n                    \"y\": .866*hexSize*(1/4),\n                };\n            case WARP_DIRECTIONS.SOUTHEAST:\n                return {\n                    \"x\": hexSize*(7/8),\n                    \"y\": .866*hexSize*(3/4),\n                };\n            case WARP_DIRECTIONS.SOUTH:\n                return {\n                    \"x\": hexSize*.5,\n                    \"y\": hexSize*.866,\n                };\n            case WARP_DIRECTIONS.SOUTHWEST:\n                return {\n                    \"x\": hexSize*(1/8),\n                    \"y\": hexSize*.866*(3/4),\n                };\n            case WARP_DIRECTIONS.NORTHWEST:\n                return {\n                    \"x\": hexSize*(1/8),\n                    \"y\": hexSize*.866*(1/4),\n                };\n            default:\n                return {\n                    \"x\": 0,\n                    \"y\": 0,\n                };\n        }\n    }\n\n\n    render() {\n        let posStyle = this.props.posStyle;\n\n        let warp_lines = [];\n        let hexSize = this.props.hexSize;\n        for(let [index, one_warp] of warp_configs[this.props.warps].entries()) {\n            let start_coords = this.get_endpoint_coords(one_warp[0], hexSize);\n            let end_coords = this.get_endpoint_coords(one_warp[1], hexSize);\n            warp_lines.push(\n                <line className=\"warp-line\"\n                    x1={start_coords.x}\n                    y1={start_coords.y}\n                    x2={end_coords.x}\n                    y2={end_coords.y}\n                    onClick={()=>this.props.onClick()}\n                    key={\"warp_line_\"+index}\n                />\n            );\n        }\n\n        return(\n            <HexComponent\n                onClick={()=>this.props.onClick()}\n                posStyle={posStyle}\n                hexSize={this.props.hexSize}\n                hexClass={\"warp\"}\n                svgElements={warp_lines}\n            >\n            </HexComponent>\n        );\n    }\n}\n\nexport const SYSTEM_FORMATS = {\n    \"STREAMLINED\": 0,\n    \"STREAMLINED_WITH_NAME\": 1,\n    \"COLORBLIND_FRIENDLY\": 2,\n    \"COLORBLIND_FRIENDLY_WITH_NAME\": 3,\n    \"ID_ONLY\": 4,\n};\n\nexport class SystemComponent extends React.Component {\n\n    render() {\n        let system = this.props.system;\n        let format = this.props.format;\n        let posStyle = this.props.posStyle;\n        let display = null;\n        let id_div = (<div className=\"id\">{system.id}</div>);\n        let extras = [];\n        let value_div = null;\n        if(this.props.eval_variables && system.isBlue()) {\n            value_div = (<div className=\"value\">={system.evaluate(this.props.eval_variables)}</div>);\n        }\n        if(system.wormhole !== null) {\n            switch(system.wormhole) {\n                case WORMHOLES.ALPHA:\n                    extras.push(<div className=\"wormhole alpha\" key=\"alpha_wh\">a</div>);\n                    break;\n                case WORMHOLES.BETA:\n                    extras.push(<div className=\"wormhole beta\" key=\"alpha_wh\">b</div>);\n                    break;\n                default: break;\n            }\n        }\n        if(system.anomaly !== null) {\n            switch(system.anomaly) {\n                case ANOMALIES.SUPERNOVA:\n                    extras.push(<div className=\"supernova\" key=\"supernova\"></div>);\n                    break;\n                case ANOMALIES.GRAVITY_RIFT:\n                    extras.push(<div className=\"gravity-rift\" key=\"gravity-rift\"></div>);\n                    break;\n                case ANOMALIES.NEBULA:\n                    extras.push(<div className=\"nebula\" key=\"nebula\"></div>);\n                    break;\n                case ANOMALIES.ASTEROID_FIELD:\n                    extras.push(\n                        <div className=\"asteroid-field\" key=\"asteroid-field\">\n                            <div className=\"asteroid a\"></div>\n                            <div className=\"asteroid b\"></div>\n                            <div className=\"asteroid c\"></div>\n                            <div className=\"asteroid d\"></div>\n                            <div className=\"asteroid e\"></div>\n                        </div>\n                    );\n                    break;\n                default:\n                    break;\n            }\n        }\n        let rex_class = \"\";\n        if(system.isMecatolRexSystem()) rex_class = \"rex\";\n        let hex_props = {\n            onClick:()=>this.props.onClick(),\n            posStyle:posStyle,\n            hexSize:this.props.hexSize,\n            hexClass:rex_class,\n            draggable:this.props.draggable,\n            onDrag:(event)=>this.props.onDrag(event),\n            onDragEnd:(event)=>this.props.onDragEnd(event),\n            onDrop:(event)=>this.props.onDrop(event),\n        };\n\n        switch(format) {\n            case SYSTEM_FORMATS.ID_ONLY:\n                display = (\n                    <HexComponent {...hex_props} >\n                        <span className=\"id-alone\">\n                            {system.id}\n                        </span>\n                    </HexComponent>\n                );\n                break;\n            case SYSTEM_FORMATS.STREAMLINED_WITH_NAME:\n                display = (\n                    <HexComponent {...hex_props} >\n                        {id_div}\n                        {value_div}\n                        {system.planets.map(function(planet, index) {\n                            return(\n                                <PlanetComponent\n                                    planet={planet}\n                                    key={planet.name}\n                                    format={PLANET_FORMATS.STREAMLINED_WITH_NAME}\n                                />\n                            )\n                        }, this)}\n                        {extras}\n                    </HexComponent>\n                );\n                break;\n            case SYSTEM_FORMATS.STREAMLINED:\n                display = (\n                    <HexComponent {...hex_props} >\n                        {id_div}\n                        {value_div}\n                        {system.planets.map(function(planet, index) {\n                            return(\n                                <PlanetComponent\n                                    planet={planet}\n                                    key={planet.name}\n                                    format={PLANET_FORMATS.STREAMLINED}\n                                />\n                            )\n                        }, this)}\n                        {extras}\n                    </HexComponent>\n                );\n                break;\n            case SYSTEM_FORMATS.COLORBLIND_FRIENDLY:\n                display = (\n                    <HexComponent {...hex_props} >\n                        {id_div}\n                        {value_div}\n                        {system.planets.map(function(planet, index) {\n                            return(\n                                <PlanetComponent\n                                    planet={planet}\n                                    key={planet.name}\n                                    format={PLANET_FORMATS.COLORBLIND_FRIENDLY}\n                                />\n                            )\n                        }, this)}\n                    </HexComponent>\n                );\n                break;\n            case SYSTEM_FORMATS.COLORBLIND_FRIENDLY_WITH_NAME:\n                display = (\n                    <HexComponent {...hex_props} >\n                        {id_div}\n                        {value_div}\n                        {system.planets.map(function(planet, index) {\n                            return(\n                                <PlanetComponent\n                                    planet={planet}\n                                    key={planet.name}\n                                    format={PLANET_FORMATS.COLORBLIND_FRIENDLY_WITH_NAME}\n                                />\n                            )\n                        }, this)}\n                    </HexComponent>\n                );\n                break;\n            default:\n                break;\n        }\n        return display;\n    }\n}\n\nexport const PLANET_FORMATS = {\n    \"STREAMLINED\": 0,\n    \"STREAMLINED_WITH_NAME\": 1,\n    \"COLORBLIND_FRIENDLY\": 2,\n    \"COLORBLIND_FRIENDLY_WITH_NAME\": 3,\n};\n\nexport class PlanetComponent extends React.Component {\n\n    render() {\n        let planet = this.props.planet;\n        let format = this.props.format;\n        let trait_class = \"\";\n        let trait_abbr = \"\";\n        switch(planet.trait) {\n            case PLANET_TRAITS.INDUSTRIAL:\n                trait_class = \"industrial\";\n                trait_abbr = \"I\";\n                break;\n            case PLANET_TRAITS.HAZARDOUS:\n                trait_class = \"hazardous\";\n                trait_abbr = \"H\";\n                break;\n            case PLANET_TRAITS.CULTURAL:\n                trait_class=\"cultural\";\n                trait_abbr = \"C\";\n                break;\n            default:\n                break;\n        }\n        let tech_class = \"\";\n        let tech_abbr = \"\";\n        switch(planet.tech_specialty) {\n            case TECH_SPECIALTIES.CYBERNETIC:\n                tech_class = \"cybernetic\";\n                tech_abbr = \"Y\";\n                break;\n            case TECH_SPECIALTIES.PROPULSION:\n                tech_class = \"propulsion\";\n                tech_abbr = \"B\";\n                break;\n            case TECH_SPECIALTIES.BIOTIC:\n                tech_class = \"biotic\";\n                tech_abbr = \"G\";\n                break;\n            case TECH_SPECIALTIES.WARFARE:\n                tech_class = \"warfare\";\n                tech_abbr = \"R\";\n                break;\n            default:\n                break;\n        }\n        let name_stuff = null;\n        if(\n            format===PLANET_FORMATS.STREAMLINED_WITH_NAME\n            || format===PLANET_FORMATS.COLORBLIND_FRIENDLY_WITH_NAME\n        ) {\n            name_stuff=(<span className=\"name\">{ planet.name }</span>);\n        }\n        let values = (\n            <div className=\"value_container\">\n                <span className=\"resources\">{ planet.resources }</span>\n                <span className=\"influence\">{ planet.influence }</span>\n            </div>);\n        if(\n            format===PLANET_FORMATS.COLORBLIND_FRIENDLY_WITH_NAME\n            || format===PLANET_FORMATS.COLORBLIND_FRIENDLY\n        ) {\n            values = (\n                <div className=\"value_container\">\n                    <span className={\"tech \"+tech_class}>{tech_abbr}</span>\n                    <span className=\"resources\">{ planet.resources }</span>\n                    <span className=\"influence\">{ planet.influence }</span>\n                    <span className={\"trait \"+trait_class}>{trait_abbr}</span>\n                </div>\n            )\n        }\n        return (\n            <div className={\"planet \"+trait_class+\" \"+tech_class}>\n                {values}\n                {name_stuff}\n            </div>\n        );\n    }\n}","import {MAP_SPACE_TYPES} from \"./map-components\";\nimport {warp_configs} from \"./data/warp_data\";\nimport {ANOMALIES, PLANET_TRAITS, TECH_SPECIALTIES, WORMHOLES} from \"./data/tile_data\";\n\nexport const PLANET_EVAL_STRATEGIES = {\n    \"SUM\": 1,\n    \"GREATEST\": 2,\n    \"GREATEST_PLUS_TECH\": 3,\n};\n\nexport class Planet {\n    constructor(obj_data) {\n        this.trait = obj_data.trait;\n        this.tech_specialty = obj_data.tech_specialty;\n        this.resources = obj_data.resources;\n        this.influence = obj_data.influence;\n        this.name = obj_data.name;\n    }\n\n    evaluate(variables) {\n        let v = variables.data;\n        let value = v.BASE_PLANET_MOD;\n        let r = this.resources*v.RESOURCES_MULTIPLIER,\n            i = this.influence*v.INFLUENCE_MULTIPLIER;\n        let t = 0;\n        if(this.tech_specialty!==null) {\n            t+=v.TECH_MOD;\n            switch(this.tech_specialty) {\n                case TECH_SPECIALTIES.WARFARE:\n                    t+=v.TECH_WARFARE_MOD;\n                    break;\n                case TECH_SPECIALTIES.PROPULSION:\n                    t+=v.TECH_PROPULSION_MOD;\n                    break;\n                case TECH_SPECIALTIES.BIOTIC:\n                    t+=v.TECH_BIOTIC_MOD;\n                    break;\n                case TECH_SPECIALTIES.CYBERNETIC:\n                    t+=v.TECH_CYBERNETIC_MOD;\n                    break;\n                default:\n                    break;\n            }\n        }\n        switch(v.PLANET_STRATEGY) {\n            case PLANET_EVAL_STRATEGIES.GREATEST:\n                let to_add = r;\n                if(i>to_add) to_add = i;\n                if(t>to_add) to_add = t;\n                value += to_add;\n                break;\n            case PLANET_EVAL_STRATEGIES.AVERAGE:\n                value += (r+i+t)/3;\n                break;\n            default:\n                let high_one = r;\n                if(i>high_one) high_one = i;\n                value += high_one+t;\n                break;\n        }\n        if(r>0) value+= v.NONZERO_RESOURCES_MOD;\n        if(i>0) value+= v.NONZERO_INFLUENCE_MOD;\n        switch(this.trait) {\n            case PLANET_TRAITS.CULTURAL:\n                value+=v.TRAIT_CULTURAL_MOD;\n                break;\n            case PLANET_TRAITS.HAZARDOUS:\n                value+=v.TRAIT_HAZARDOUS_MOD;\n                break;\n            case PLANET_TRAITS.INDUSTRIAL:\n                value+=v.TRAIT_INDUSTRIAL_MOD;\n                break;\n            default:\n                break;\n        }\n        return value;\n    }\n}\n\nexport class PlanetBox {\n    constructor(planet_data) {\n        this.planets = [];\n        for(let one_planet_data of planet_data) {\n            this.planets.push(new Planet(one_planet_data));\n        }\n    }\n\n    getPlanetByName(name) {\n        for(let one_planet of this.planets) {\n            if (one_planet.name === name) {\n                return one_planet;\n            }\n        }\n        return null;\n    }\n}\n\nexport class System {\n    constructor(obj_data, planet_box) {\n        this.id = obj_data.id;\n        this.anomaly = obj_data.anomaly;\n        this.wormhole = obj_data.wormhole;\n        this.planets = [];\n        for(let planet_name of obj_data.planets) {\n            let plToAdd = planet_box.getPlanetByName(planet_name);\n            if(plToAdd) this.planets.push(plToAdd);\n        }\n    }\n\n    evaluate(variables) {\n        let v = variables.data;\n        let value=0;\n        for(let one_planet of this.planets) {\n            value+=one_planet.evaluate(variables);\n        }\n        if(this.planets.length===1) {\n            value+=v.SINGLE_PLANET_MOD;\n        } else if(this.planets.length>1) {\n            value+=v.MULTI_PLANET_MOD;\n            if(this.planets[0].trait === this.planets[1].trait) {\n                value+=v.MATCHING_PLANETS_MOD;\n            } else {\n                value+=v.NONMATCHING_PLANETS_MOD;\n            }\n        }\n        if(this.isMecatolRexSystem()) {\n            value+=v.MECATOL_REX_SYS_MOD;\n        }\n        return value;\n    }\n\n    getDistanceModifier(variables = {}) {\n        let v = variables.data;\n        let value = v.DISTANCE_MOD_BASE;\n        if(this.isBlue()) {\n            if(v.DISTANCE_MOD_PLANET===false) return false;\n            value+=v.DISTANCE_MOD_PLANET;\n            if(this.wormhole!==null) {\n                if(v.DISTANCE_MOD_PLANET_WORMHOLE===false) return false;\n                value+=v.DISTANCE_MOD_PLANET_WORMHOLE;\n            }\n        } else if(this.anomaly===null) {\n            if(this.wormhole!==null) {\n                if(v.DISTANCE_MOD_EMPTY_WORMHOLE===false) return false;\n                value+=v.DISTANCE_MOD_EMPTY_WORMHOLE;\n            } else {\n                if(v.DISTANCE_MOD_EMPTY===false) return false;\n                value+=v.DISTANCE_MOD_EMPTY;\n            }\n        } else {\n            switch(this.anomaly) {\n                case ANOMALIES.ASTEROID_FIELD:\n                    if(v.DISTANCE_MOD_ASTEROID_FIELD===false) return false;\n                    value+=v.DISTANCE_MOD_ASTEROID_FIELD;\n                    break;\n                case ANOMALIES.GRAVITY_RIFT:\n                    if(v.DISTANCE_MOD_GRAVITY_RIFT===false) return false;\n                    value+=v.DISTANCE_MOD_GRAVITY_RIFT;\n                    break;\n                case ANOMALIES.NEBULA:\n                    if(v.DISTANCE_MOD_NEBULA===false) return false;\n                    value+=v.DISTANCE_MOD_NEBULA;\n                    break;\n                case ANOMALIES.SUPERNOVA:\n                    if(v.DISTANCE_MOD_SUPERNOVA===false) return false;\n                    value+=v.DISTANCE_MOD_SUPERNOVA;\n                    break;\n                default:\n                    return false;\n            }\n        }\n        return value;\n    }\n\n    isMecatolRexSystem() {\n        for(let planet of this.planets) {\n            if (planet.name === \"Mecatol Rex\") return true;\n        }\n        return false;\n    }\n\n    isRed() {\n        if(this.planets.length<1) return true;\n        return false;\n    }\n\n    isBlue() {\n        return !this.isRed();\n    }\n\n    getStringName() {\n        let system = this;\n        let name_array = [];\n        for(let planet of system.planets) {\n            name_array.push(planet.name+\" (\"+planet.resources+\"/\"+planet.influence+\")\");\n        }\n        if(system.wormhole !== null) {\n            switch(system.wormhole) {\n                case WORMHOLES.ALPHA:\n                    name_array.push(\"(a)\");\n                    break;\n                case WORMHOLES.BETA:\n                    name_array.push(\"(b)\");\n                    break;\n                default: break;\n            }\n        }\n        if(system.anomaly !== null) {\n            switch(system.anomaly) {\n                case ANOMALIES.SUPERNOVA:\n                    name_array.push(\"Supernova\");\n                    break;\n                case ANOMALIES.GRAVITY_RIFT:\n                    name_array.push(\"Gravity Rift\");\n                    break;\n                case ANOMALIES.NEBULA:\n                    name_array.push(\"Nebula\");\n                    break;\n                case ANOMALIES.ASTEROID_FIELD:\n                    name_array.push(\"Asteroid Field\");\n                    break;\n                default:\n                    break;\n            }\n        }\n        if(name_array.length===0) name_array.push(\"Empty Space\");\n        return system.id+\": \"+name_array.join(\", \");\n    }\n}\n\nexport class SystemBox {\n    constructor(system_data, planet_box) {\n        this.systems = [];\n        this.planet_box = planet_box;\n        for(let one_system_data of system_data) {\n            this.systems.push(new System(one_system_data, planet_box));\n        }\n    }\n\n    getBlueSystemTotal() {\n        let total = 0;\n        for(let system of this.systems) {\n            if(system.isBlue()) {\n                total++;\n            }\n        }\n        return total;\n    }\n\n    getRedSystemTotal() {\n        let total = 0;\n        for(let system of this.systems) {\n            if(system.isRed()) {\n                total++;\n            }\n        }\n        return total;\n    }\n\n    getSystemIndexByID(id) {\n        for(let [index, system] of this.systems.entries()) {\n            if(system.id === id) return index;\n        }\n        return null;\n    }\n\n    getSystemByID(id, splice=false) {\n        let sysindex = this.getSystemIndexByID(id);\n        if (sysindex!==null && splice) return this.systems.splice(sysindex, 1);\n        if (sysindex!==null) return this.systems[sysindex];\n        return null;\n    }\n\n    makeCopy() {\n        let new_system_box = new SystemBox([], this.planet_box);\n        for(let one_system of this.systems) {\n            new_system_box.systems.push(one_system);\n        }\n        return new_system_box;\n    }\n\n    getWormholeSystems(type=null) {\n        let systems_to_return = [];\n        for(let one_sys of this.systems) {\n            if(\n                one_sys.wormhole!==null\n                &&\n                (\n                    type===null\n                    ||\n                    one_sys.wormhole===type\n                )\n            ) {\n                systems_to_return.push(one_sys);\n            }\n        }\n        return systems_to_return;\n    }\n}\n\nexport function getDistanceMultiplier(modded_distance, variables) {\n    let v = variables.data;\n    let d = modded_distance;\n    if(d<0) d = 0;\n    if(d>10) d = 10;\n    return v.DISTANCE_MULTIPLIER[d];\n}\n\nexport class Map {\n    constructor(load_default=true, starting_space=null, iterations=3) {\n        if(load_default) {\n            this.spaces = [starting_space];\n            for(let i=0; i<iterations; i++) {\n                this.addAdjacentSpaces();\n            }\n        } else {\n            this.spaces = [];\n        }\n    }\n\n    makeCopy() {\n        let new_map = new Map(false);\n        for(let one_space of this.spaces) {\n            let new_space = new MapSpace(\n                one_space.x,\n                one_space.y,\n                one_space.z,\n                one_space.warp_spaces,\n                one_space.type,\n                one_space.system,\n            );\n            new_map.spaces.push(new_space);\n        }\n        return new_map;\n    }\n\n    containsSystem(system_id) {\n        return (this.getSpaceBySystemID(system_id) !== null);\n    }\n\n    getSpaceBySystemID(id) {\n        for(let one_space of this.spaces) {\n            if(\n                one_space.system!==null\n                && one_space.system.id===id\n            ) return one_space;\n        }\n        return null;\n    }\n\n    getOpenSpacesTotal() {\n        let total = 0;\n        for(let space of this.spaces) {\n            if(space.type===MAP_SPACE_TYPES.OPEN) {\n                total++;\n            }\n        }\n        return total;\n    }\n\n    getBlueSystemTotal() {\n        let total = 0;\n        for(let space of this.spaces) {\n            if(space.type===MAP_SPACE_TYPES.SYSTEM && space.system.isBlue()) {\n                total++;\n            }\n        }\n        return total;\n    }\n\n    getRedSystemTotal() {\n        let total = 0;\n        for(let space of this.spaces) {\n            if(space.type===MAP_SPACE_TYPES.SYSTEM && space.system.isRed()) {\n                total++;\n            }\n        }\n        return total;\n    }\n\n    getPossibleSystemTotal() {\n        let total = 0;\n        for(let space of this.spaces) {\n            if(\n                space.type===MAP_SPACE_TYPES.SYSTEM\n                || space.type===MAP_SPACE_TYPES.OPEN\n            ) {\n                total++;\n            }\n        }\n        return total;\n    }\n\n   areWarpsLogical() {\n        for(let space of this.spaces) {\n            if (space.type === MAP_SPACE_TYPES.WARP) {\n                for(let one_warp of warp_configs[space.warp_spaces]) {\n                    for(let one_warp_dir of one_warp) {\n                        if(!this.doesWarpDirectionConnect(one_warp_dir, space, [space])) {\n                            return false;\n                        }\n                    }\n                }\n            }\n        }\n        return true;\n    }\n\n    doesWarpDirectionConnect(warp_direction, space, checked_spaces) {\n        let whereItGoes = space.getWarpDirectionCoordinates(warp_direction);\n        let spaceItGoes = getObjFromCoord(whereItGoes, this.spaces);\n        if(!spaceItGoes) return false;\n        if(areCoordsInList(spaceItGoes, checked_spaces)) return false;\n        if(spaceItGoes.type === MAP_SPACE_TYPES.CLOSED) return false;\n        if(spaceItGoes.type === MAP_SPACE_TYPES.WARP) {\n            let oppositeDirection = {\n                \"x\": warp_direction.x*-1,\n                \"y\": warp_direction.y*-1,\n                \"z\": warp_direction.z*-1,\n            };\n            let directions_to_check = [];\n            for(let one_next_warp of warp_configs[spaceItGoes.warp_spaces]) {\n                if(areCoordsInList(oppositeDirection, [one_next_warp[0]])) {\n                    directions_to_check.push(one_next_warp[1]);\n                } else if(areCoordsInList(oppositeDirection, [one_next_warp[1]])) {\n                    directions_to_check.push(one_next_warp[0]);\n                }\n            }\n            if(directions_to_check.length === 0) return false;\n            checked_spaces.push(spaceItGoes);\n            for(let one_direction of directions_to_check) {\n                if(!this.doesWarpDirectionConnect(one_direction, spaceItGoes, checked_spaces)) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    isComplete() {\n        for(let map_space of this.spaces) {\n            if(map_space.type===MAP_SPACE_TYPES.OPEN) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    isLegal() {\n        let is_legal = true;\n        for(let map_space of this.spaces) {\n            if(map_space.type===MAP_SPACE_TYPES.SYSTEM && map_space.system.wormhole !== null) {\n                for(let one_sys of this.getAdjacentSystems(map_space)) {\n                    if(one_sys.type===MAP_SPACE_TYPES.SYSTEM && one_sys.system.wormhole===map_space.system.wormhole) {\n                        is_legal = false;\n                        break;\n                    }\n                }\n            }\n            if(map_space.type===MAP_SPACE_TYPES.SYSTEM && map_space.system.anomaly !== null) {\n                for(let one_sys of this.getAdjacentSystems(map_space)) {\n                    if(one_sys.type===MAP_SPACE_TYPES.SYSTEM && one_sys.system.anomaly!==null) {\n                        is_legal = false;\n                        break;\n                    }\n                }\n            }\n            if(!is_legal) break;\n        }\n        return is_legal;\n    }\n\n    getHomeValue(space, variables) {\n        let home_total = 0;\n        let spaces_to_get_to = [];\n        for(let one_space of this.spaces) {\n            if(\n                one_space.type===MAP_SPACE_TYPES.SYSTEM &&\n                one_space.system.evaluate(variables) > 0\n            ) {\n                spaces_to_get_to.push(one_space);\n            }\n        }\n        for(let one_space of spaces_to_get_to) {\n            let shortest_distance = this._getShortestModdedDistance(\n                space, one_space, variables\n            );\n            if(!(shortest_distance===null)) {\n                home_total+=getDistanceMultiplier(\n                    shortest_distance, variables\n                )*one_space.system.evaluate(variables);\n            }\n        }\n        return home_total;\n    }\n\n    _getShortestModdedDistance(start_space, dest_space, variables) {\n        let finished_paths = [];\n        let act_paths = [];\n\n        let first_steps = this.getAdjacentSystemsIncludingWormholes(start_space);\n        for(let one_step of first_steps) {\n            if(\n                one_step.system.getDistanceModifier(variables)!==false\n                && this.getMapDistanceModifier(start_space, dest_space, variables)!==false\n            ) {\n                let new_path = [one_step.system.id];\n                if(one_step.system.id===dest_space.system.id) {\n                    finished_paths.push(new_path);\n                } else {\n                    act_paths.push(new_path);\n                }\n            }\n        }\n        while(act_paths.length>0) {\n            let new_active_paths = [];\n            for(let one_path of act_paths) {\n                let results = this._extendPath(start_space, dest_space, one_path, variables);\n                for(let one_done of results.finished) {\n                    finished_paths.push(one_done);\n                }\n                for(let one_ongoing of results.ongoing) {\n                    new_active_paths.push(one_ongoing);\n                }\n            }\n            act_paths=new_active_paths;\n        }\n        let first_yet = false;\n        let shortest = null;\n        for(let one_path of finished_paths) {\n            let path_length = this._calculateModdedDistanceFromRaw(one_path, variables, start_space);\n            if(!first_yet || path_length<shortest) {\n                shortest = path_length;\n                first_yet = true;\n            }\n        }\n        return shortest;\n    }\n\n    _extendPath(start_space, dest_space, path, variables) {\n        let completed_paths = [];\n        let ongoing_paths = [];\n        let last_step = this.getSpaceBySystemID(path[path.length-1]);\n        let next_steps = this.getAdjacentSystemsIncludingWormholes(last_step);\n        for(let one_step of next_steps) {\n            if(one_step.system.id===dest_space.system.id) {\n                let path_copy = [...path];\n                path_copy.push(one_step.system.id);\n                completed_paths.push(path_copy);\n            } else if (\n                !(one_step.system.id in path)\n                && one_step.system.getDistanceModifier(variables)!==false\n                && this.getMapDistanceModifier(start_space, dest_space, variables)!==false\n                && path.length<4\n            ) {\n                let path_copy = [...path];\n                path_copy.push(one_step.system.id);\n                ongoing_paths.push(path_copy);\n            }\n        }\n        return({\n            \"finished\": completed_paths,\n            \"ongoing\": ongoing_paths,\n        });\n    }\n\n\n    _calculateModdedDistanceFromRaw(path, variables, start_space) {\n        let modded_dist = 0;\n        for(let one_index of path) {\n            let one_sys = this.getSpaceBySystemID(one_index);\n            modded_dist+=\n                one_sys.system.getDistanceModifier(variables)\n                +this.getMapDistanceModifier(start_space, one_sys, variables);\n        }\n        return modded_dist;\n    }\n\n    getMapDistanceModifier(start_space, dest_space, variables) {\n        let adj_spaces = this.getAdjacentSpacesIncludingWormholes(dest_space);\n        for(let one_space of adj_spaces) {\n            if(\n                one_space.type===MAP_SPACE_TYPES.HOME &&\n                !areCoordsInList(start_space, [one_space]\n                )\n            ) {\n                return variables.data.DISTANCE_MOD_ADJACENT_TO_OPPONENT;\n            }\n        }\n        return 0;\n    }\n\n\n\n    addAdjacentSpaces() {\n        let coords_to_add = [];\n        for(let map_space of this.spaces) {\n            let adjacent_coords = map_space.getAdjacentCoordinates();\n            for(let one_adjacent_coords of adjacent_coords) {\n                if(\n                    !areCoordsInList(one_adjacent_coords, coords_to_add) &&\n                    !areCoordsInList(one_adjacent_coords, this.spaces)\n                ) {\n                    coords_to_add.push(one_adjacent_coords);\n                }\n            }\n        }\n        for(let one_coords_to_add of coords_to_add) {\n            this.spaces.push(new MapSpace(\n                one_coords_to_add.x,\n                one_coords_to_add.y,\n                one_coords_to_add.z,\n            ));\n        }\n    }\n\n    _getAdjacentSpacesThroughWarps(system_space, warp_space) {\n        let adj_systems = [];\n        let direction_from = {\n            \"x\": system_space.x - warp_space.x,\n            \"y\": system_space.y - warp_space.y,\n            \"z\": system_space.z - warp_space.z,\n        };\n        let warps_to_follow = [];\n        for(let one_warp of warp_configs[warp_space.warp_spaces]) {\n            if(areCoordsInList(direction_from, one_warp)) {\n                warps_to_follow.push(one_warp);\n            }\n        }\n        for(let one_warp of warps_to_follow) {\n            for(let one_warp_direction of one_warp) {\n                if(!areCoordsInList(one_warp_direction, [direction_from])) {\n                    let next_space = getObjFromCoord(\n                        warp_space.getWarpDirectionCoordinates(one_warp_direction),\n                        this.spaces\n                    );\n                    if(next_space!==null) {\n                        if(next_space.type!==MAP_SPACE_TYPES.WARP) {\n                            if (!areCoordsInList(next_space, adj_systems)) {\n                                adj_systems.push(next_space);\n                            }\n                        } else {\n                            let farther_systems = this._getAdjacentSpacesThroughWarps(warp_space, next_space);\n                            for(let one_far_sys of farther_systems) {\n                                if(!areCoordsInList(one_far_sys, adj_systems)) {\n                                    adj_systems.push(one_far_sys);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return adj_systems;\n    }\n\n    getAdjacentSystems(space) {\n        let adj_spaces = this.getAdjacentSpaces(space);\n        let adj_systems = [];\n        for(let one_space of adj_spaces) {\n            if(one_space.type===MAP_SPACE_TYPES.SYSTEM){\n                adj_systems.push(one_space);\n            }\n        }\n        return adj_systems;\n    }\n\n    getAdjacentSpaces(space) {\n        let adj_coords = space.getAdjacentCoordinates();\n        let adj_systems = [];\n        for(let one_coord of adj_coords) {\n            let potential_space = getObjFromCoord(one_coord, this.spaces);\n            if(potential_space !== null) {\n                if(potential_space.type!==MAP_SPACE_TYPES.WARP){\n                    if(!areCoordsInList(potential_space, adj_systems)) {\n                        adj_systems.push(potential_space);\n                    }\n                } else {\n                    let potential_systems = this._getAdjacentSpacesThroughWarps(space, potential_space);\n                    for(let one_system_space of potential_systems) {\n                        if(!areCoordsInList(one_system_space, adj_systems)) {\n                            adj_systems.push(one_system_space);\n                        }\n                    }\n                }\n            }\n        }\n        return adj_systems;\n    }\n\n    getAdjacentSystemsIncludingWormholes(space) {\n        let adj_spaces = this.getAdjacentSpacesIncludingWormholes(space);\n        let adj_systems = [];\n        for(let one_space of adj_spaces) {\n            if(one_space.type===MAP_SPACE_TYPES.SYSTEM) {\n                adj_systems.push(one_space);\n            }\n        }\n        return adj_systems;\n    }\n\n    getAdjacentSpacesIncludingWormholes(space) {\n        let adj_systems = this.getAdjacentSpaces(space);\n        let wh_systems = this.getMatchingWormholeSpaces(space);\n        for(let one_whs of wh_systems) {\n            if(!areCoordsInList(one_whs, adj_systems)) {\n                adj_systems.push(one_whs);\n            }\n        }\n        return adj_systems;\n    }\n\n    getMatchingWormholeSpaces(space) {\n        let matching_spaces = [];\n        if(space.type===MAP_SPACE_TYPES.SYSTEM && space.system.wormhole!==null) {\n            for(let one_space of this.spaces) {\n                if(\n                    one_space.type===MAP_SPACE_TYPES.SYSTEM &&\n                    one_space.system.wormhole===space.system.wormhole &&\n                    one_space.system.id !== space.system.id\n                ) {\n                    matching_spaces.push(one_space);\n                }\n            }\n        }\n        return matching_spaces;\n    }\n\n}\n\nexport function getObjFromCoord(coords, list) {\n        for(let existing_coords of list) {\n        if(\n            coords.x === existing_coords.x &&\n            coords.y === existing_coords.y &&\n            coords.z === existing_coords.z\n        ) {\n            return existing_coords;\n        }\n    }\n    return null;\n}\n\nexport function areCoordsInList(coords, list) {\n    if(getObjFromCoord(coords, list)) {\n        return true;\n    }\n    return false;\n}\n\nexport class MapSpace {\n    constructor(x, y, z, warp_spaces=null, type=MAP_SPACE_TYPES.OPEN, system=null) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.warp_spaces = warp_spaces;\n        this.type = type;\n        this.system = system;\n    }\n\n    getAdjacentCoordinates() {\n        let x = this.x;\n        let y = this.y;\n        let z = this.z;\n        return [\n            {\"x\":x+1,\"y\":y-1,\"z\":z},\n            {\"x\":x+1,\"y\":y,\"z\":z-1},\n            {\"x\":x-1,\"y\":y+1,\"z\":z},\n            {\"x\":x,\"y\":y+1,\"z\":z-1},\n            {\"x\":x-1,\"y\":y,\"z\":z+1},\n            {\"x\":x,\"y\":y-1,\"z\":z+1},\n        ];\n    }\n\n    getWarpDirectionCoordinates(warp_direction) {\n        return {\n            \"x\": this.x+warp_direction.x,\n            \"y\": this.y+warp_direction.y,\n            \"z\": this.z+warp_direction.z,\n        }\n    }\n}","import React from 'react';\n\nexport function download(filename, text) {\n  let element = document.createElement('a');\n  element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n  element.setAttribute('download', filename);\n\n  element.style.display = 'none';\n  document.body.appendChild(element);\n\n  element.click();\n\n  document.body.removeChild(element);\n}\n\nexport function getSafeFileName(string) {\n    return string.replace(/[^a-z0-9]/gi, '_').toLowerCase();\n}\n\nexport class JSONDownloadButton extends React.Component {\n    downloadJSON() {\n        let downloadInfo = this.props.getDownloadInfo();\n        download(getSafeFileName(downloadInfo.filename)+\".json\", JSON.stringify(downloadInfo.data));\n    }\n\n    render() {\n        return(\n            <button onClick={()=>this.downloadJSON()} className={this.props.className}>\n                {this.props.title}\n            </button>\n        );\n    }\n}\n\nexport class JSONUploadButton extends React.Component {\n    handleUpload() {\n        let fr = new FileReader();\n        fr.readAsText(document.getElementById(this.props.id).files[0]);\n        fr.onload = function(oFREvent) {\n            this.props.handleJSON(JSON.parse(oFREvent.target.result));\n            document.getElementById(this.props.id)\n        }.bind(this);\n    }\n\n    render() {\n        return(\n            <span className=\"control\">\n                <span className=\"file is-small\">\n                    <label className=\"file-label\">\n                        <input\n                            type=\"file\"\n                            id={this.props.id}\n                            className=\"file-input\"\n                            onChange={()=>this.handleUpload()}\n                        />\n                        <span className=\"file-cta\">\n                            <span className=\"file-icon\">\n                                <i className=\"fas fa-upload\"></i>\n                            </span>\n                            <span className=\"file-label\">\n                                Choose a file...\n                            </span>\n                        </span>\n                    </label>\n                </span>\n            </span>\n        )\n    }\n}","import React from 'react';\nimport $ from 'jquery';\nimport ls from \"local-storage\";\n\nimport {\n    planet_data,\n    system_data,\n} from '../data/tile_data.js';\nimport default_layouts from '../data/default_layouts.json';\n\nimport {\n    Map,\n    MapSpace,\n    SystemBox,\n    PlanetBox,\n    System,\n} from \"../map-logic\";\n\nwindow.jQuery = $;\n\nexport class BaseEditor extends React.Component {\n    constructor(props) {\n        super(props);\n        this.planet_box = new PlanetBox(planet_data);\n        this.system_box = new SystemBox(system_data, this.planet_box);\n        this.default_layouts = default_layouts;\n\n        this.state = {\n            \"map\": null,\n            \"message\": \"\",\n            \"input_title\": \"\",\n            \"saved_data\": ls.get(this.props.storage_key) || [],\n            \"selected_item\": this.getNewStringValue(),\n        };\n    }\n\n    setMap(new_map) {\n        this.setState({\"map\": new_map});\n    }\n\n    getLayoutFromJSON(data) {\n        let new_map = new Map(false);\n        for(let one_space_data of data) {\n            let space_system = null;\n            if(one_space_data.system!==null) {\n                space_system = new System(one_space_data.system, this.planet_box);\n            }\n            new_map.spaces.push(new MapSpace(\n                one_space_data.x,\n                one_space_data.y,\n                one_space_data.z,\n                one_space_data.warp_spaces,\n                one_space_data.type,\n                space_system,\n            ));\n        }\n        return new_map;\n    }\n\n    getJSONDataFromSpaces(spaces) {\n        let spaces_data = [];\n        for(let one_space of spaces) {\n            let space_data = Object.assign({}, one_space, {\"system\": null});\n            if(one_space.system !== null) {\n                let system_data = Object.assign({}, one_space.system, {\"planets\":[]});\n                for(let one_planet of one_space.system.planets) {\n                    system_data.planets.push(one_planet.name);\n                }\n                space_data.system = system_data;\n            }\n            spaces_data.push(space_data);\n        }\n        return spaces_data;\n    }\n\n    getCurrentLayoutJSON() {\n        let l_title = \"Untitled Layout\";\n        if($('#layout-title').val() !== '') {\n            l_title = $('#layout-title').val();\n        }\n        return {\n            \"title\": l_title,\n            \"data\": this.getJSONDataFromSpaces(this.state.map.spaces),\n        };\n    }\n\n    getCurrentLayoutJSONFileInfo() {\n        let data = this.getCurrentLayoutJSON();\n        this.setState({\"message\": \"\"});\n        return {\n            \"filename\": data.title,\n            \"data\": [data]\n        };\n    }\n\n    getAllLayoutJSONFileInfo() {\n        this.setState({\"message\": \"\"});\n        let data = ls.get(this.props.storage_key) || [];\n        return {\n            \"filename\": \"All \"+this.props.subject_plural,\n            \"data\": data\n        };\n    }\n\n    setLayout(data, selected_item=\"new\", new_map=null) {\n        if(new_map===null) new_map = this.getLayoutFromJSON(data.data);\n        let loadedTitle = data.title;\n        let new_message = this.props.subject+\" '\"+loadedTitle+\"' displayed.\";\n        this.setMap(new_map);\n        this.setState({\n            \"message\": new_message,\n            \"input_title\": loadedTitle,\n            \"selected_item\": selected_item.toString(),\n        });\n    }\n\n    addLayoutsFromJSON(data) {\n        if(data.length>0) {\n            let saved_data = Object.assign([], this.state.saved_data);\n            for(let dataToSave of data) {\n                saved_data.push(dataToSave);\n            }\n            ls.set(this.props.storage_key, saved_data);\n            this.setLayout(saved_data[saved_data.length-1], saved_data.length-1);\n            let new_map = this.getLayoutFromJSON(saved_data[saved_data.length-1].data);\n            this.setMap(new_map);\n            this.setState({\n                \"saved_data\": ls.get(this.props.storage_key) || [],\n                \"message\": \"Layouts loaded.\",\n                \"selected_item\": saved_data.length-1,\n                \"input_title\": saved_data[saved_data.length-1].title,\n            });\n        } else {\n            this.setState({\"message\": \"There were no \"+this.props.subject_plural+\" to load.\"})\n        }\n    }\n\n    getSelectValue() {\n        let int_select = document.getElementById(\"layout-select\");\n        return int_select.options[int_select.selectedIndex].value;\n    }\n\n    saveCurrent() {\n        let dataToSave = this.getCurrentLayoutJSON();\n        let currentIndex = this.getSelectValue();\n        let saved_data = Object.assign([], this.state.saved_data);\n        let new_selected = saved_data.length;\n        if(\n            currentIndex.split(\"_\")[0] === \"new\" ||\n            currentIndex.split(\"_\")[0] === \"newc\"\n        ) {\n            saved_data.push(dataToSave);\n        } else {\n            saved_data[parseInt(currentIndex)] = dataToSave;\n            new_selected = parseInt(currentIndex);\n        }\n        ls.set(this.props.storage_key, saved_data);\n        this.setState({\n            \"selected_item\": new_selected.toString(),\n            \"saved_data\": ls.get(this.props.storage_key) || [],\n            \"message\": this.props.subject+\" '\"+dataToSave.title+\"' saved.\",\n        });\n    }\n\n    deleteCurrent() {\n        let currentIndex = this.getSelectValue();\n        let saved_data = Object.assign([], this.state.saved_data);\n        let toDel = saved_data.splice(parseInt(currentIndex), 1)[0];\n        ls.set(this.props.storage_key, saved_data);\n        this.setMap(this.getNewLayout());\n        this.setState({\n            \"input_title\": \"\",\n            \"selected_item\": this.getNewStringValue(),\n            \"message\": this.props.subject+\" '\"+toDel.title+\"' deleted.\",\n            \"saved_data\": ls.get(this.props.storage_key) || [],\n        });\n    }\n\n    deleteAll() {\n        ls.remove(this.props.storage_key);\n        this.setMap(this.getNewLayout());\n        this.setState({\n            \"saved_data\": ls.get(this.props.storage_key) || [],\n            \"selected_item\": this.getNewStringValue(),\n            \"input_title\": \"\",\n            \"message\": \"All saved \"+this.props.subject_plural+\" have been deleted.\",\n            \"bank_systems\": this.syncBankSystems(this.getNewLayout()),\n        });\n    }\n}","export function compareByID(a, b) {\n    if(a.id > b.id) {\n        return 1;\n    } else if(a.id < b.id) {\n        return -1;\n    }\n    return 0;\n}\n\nexport function shuffle(a) {\n    for (let i = a.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [a[i], a[j]] = [a[j], a[i]];\n    }\n    return a;\n}\n\n","import React from 'react';\nimport $ from 'jquery';\nimport ls from \"local-storage\";\n\nimport {WORMHOLES} from \"../data/tile_data\";\nimport default_variables from '../data/default_evaluators.json';\nimport map_string_order from '../data/map_string_order.json';\n\nimport {getObjFromCoord, SystemBox} from \"../map-logic\";\nimport {\n    SYSTEM_FORMATS,\n    MapComponent,\n    MAP_SPACE_TYPES,\n    SystemBankComponent\n} from \"../map-components\";\nimport {\n    JSONDownloadButton,\n    JSONUploadButton,\n} from \"../download-helpers\";\nimport {BaseEditor} from \"./base-editor\";\nimport {\n    shuffle,\n    compareByID,\n} from \"../utilities\";\n\nwindow.jQuery = $;\nconst LOOPS_TO_TRY = 10000;\n\nexport class MapEditor extends BaseEditor {\n    constructor(props) {\n        super(props);\n        let starting_layout = this.getLayoutFromJSON(this.default_layouts[0].data);\n        this.state.map = starting_layout;\n        this.state.selected_bank_system = null;\n        this.state.system_format = SYSTEM_FORMATS.STREAMLINED_WITH_NAME;\n        this.state.draggedSystem = null;\n        this.state.option_pair_wormholes = true;\n        this.state.option_include_all_wormholes = true;\n        this.state.target_blue_total = \"random\";\n        this.state.bank_systems = this.syncBankSystems(starting_layout);\n        this.state.eval_option=\"default_0\";\n        this.state.eval_variables=default_variables[0];\n        this.state.home_values = {};\n        this.state.balance_difference = null;\n        this.state.map_string = \"\";\n        this.state.balance_options = {\n            \"dont_move_wormholes\": false,\n            \"dont_move_anomalies\": false,\n            \"dont_move_empty\": false,\n        };\n        this.state.long_op = false;\n    }\n\n    setMap(new_map, home_values=null, balance_difference=null, eval_var=null) {\n        if(new_map.isComplete()) {\n            if(home_values===null) {\n                if(eval_var===null) eval_var = this.state.eval_variables;\n                home_values = this.getHomeValues(new_map, eval_var);\n            }\n            if(balance_difference===null) {\n                balance_difference = this.getBalanceDifference(home_values);\n            }\n        } else {\n            home_values = {};\n            balance_difference = null;\n        }\n        this.setState({\n            \"map\": new_map,\n            \"bank_systems\": this.syncBankSystems(new_map),\n            \"home_values\": home_values,\n            \"balance_difference\": balance_difference,\n            \"map_string\": this.getMapString(new_map),\n        });\n    }\n\n    syncBankSystems(map) {\n        let bank_systems = new SystemBox([], []);\n        for(let system of this.system_box.systems) {\n            if(map===null || !map.containsSystem(system.id)) {\n                 bank_systems.systems.push(system);\n             }\n        }\n        bank_systems.systems.sort(compareByID);\n        return bank_systems;\n    }\n\n    setActiveBankSystem(system) {\n        this.setState({\"selected_bank_system\": system});\n    }\n\n    handleSelectChange() {\n        let new_value = this.getSelectValue();\n        let new_check = this.getSelectNewMapValue();\n        if(!(new_check === null)) {\n            if(this.getSelectNewMapType() === \"newc\") {\n                this.loadCustomLayout(new_check);\n            } else {\n                this.loadDefault(new_check);\n            }\n        } else {\n            let valIndex = parseInt(new_value);\n            this.setLayout(this.state.saved_data[valIndex], new_value);\n        }\n    }\n\n    handleEvalChange(value) {\n        let e_kind = value.split(\"_\")[0];\n        let e_index = value.split(\"_\")[1];\n        let e_var = null;\n        if(e_kind===\"default\") {\n            e_var = default_variables[e_index];\n        } else {\n            e_var = ls.get(this.props.eval_storage_key)[e_index];\n        }\n        this.setState({\n            \"eval_option\": value,\n            \"eval_variables\": e_var,\n        });\n        this.setMap(this.state.map, null, null, e_var);\n    }\n\n    getSelectNewMapValue(selected_item=null) {\n        let new_value = selected_item;\n        if(new_value===null) {\n            new_value = this.getSelectValue();\n        }\n        new_value = new_value.toString();\n        let new_check = new_value.split(\"_\");\n        if(\n            new_check.length===2\n            &&\n            (new_check[0]===\"new\"||new_check[0]===\"newc\")) {\n            return(parseInt(new_check[1]));\n        }\n        return null;\n    }\n\n    getSelectNewMapType() {\n        return this.getSelectValue().split(\"_\")[0];\n    }\n\n    getNewStringValue() {\n        if(!this.state) return \"new_0\";\n        if(this.state.selected_item.toString().substr(0, 3)===\"new\") return this.state.selected_item;\n        return \"new_0\";\n    }\n\n    isSelectNew(selected_item=null) {\n        return this.getSelectNewMapValue(selected_item)!==null;\n    }\n\n        handleFormatDisplayChange() {\n        let int_select = document.getElementById(\"select-system-display\");\n        this.setState({\"system_format\": parseInt(int_select.options[int_select.selectedIndex].value)});\n    }\n\n    onSelectedSystemDrag(event) {\n        this.setState({\n          draggedSystem: this.state.selected_bank_system,\n          message: \"\",\n        });\n    }\n\n    onSystemDrag(event, system) {\n        this.setState({\n          draggedSystem: system,\n          message: \"\",\n        });\n    }\n\n    onSystemDragEnd(event) {\n        this.setState({\n          draggedSystem: null,\n          message: \"\",\n        });\n    }\n\n    onSystemDropped(event, space_index) {\n        if(this.state.draggedSystem !== null) {\n            let new_map = this.state.map.makeCopy();\n            let selected_bank_system = this.state.selected_bank_system;\n            let is_changed = false;\n            if(space_index !== null) {\n                let space = new_map.spaces[space_index];\n                if(space.type === MAP_SPACE_TYPES.OPEN) {\n                    if(this.state.selected_bank_system !== null && this.state.selected_bank_system.id === this.state.draggedSystem.id) {\n                        selected_bank_system = null;\n                    }\n                    let old_space = new_map.getSpaceBySystemID(this.state.draggedSystem.id);\n                    if(old_space) {\n                        old_space.type = MAP_SPACE_TYPES.OPEN;\n                        old_space.system = null;\n                    }\n                    space.system = this.state.draggedSystem;\n                    space.type = MAP_SPACE_TYPES.SYSTEM;\n                    is_changed = true;\n                } else if(space.type === MAP_SPACE_TYPES.SYSTEM && !space.system.isMecatolRexSystem()) {\n                    let replaced_system = space.system;\n                    if (selected_bank_system !== null && selected_bank_system.id === this.state.draggedSystem.id) {\n                        selected_bank_system = replaced_system;\n                    } else {\n                        new_map.getSpaceBySystemID(this.state.draggedSystem.id).system = replaced_system;\n                    }\n                    space.system = this.state.draggedSystem;\n                    is_changed = true;\n                }\n            } else {\n                let old_space = new_map.getSpaceBySystemID(this.state.draggedSystem.id);\n                if(old_space) {\n                    selected_bank_system = old_space.system;\n                    old_space.type = MAP_SPACE_TYPES.OPEN;\n                    old_space.system = null;\n                    is_changed = true;\n                }\n            }\n\n            if(is_changed) {\n                this.setMap(new_map);\n                this.setState({\"selected_bank_system\": selected_bank_system,});\n            }\n            this.onSystemDragEnd(event);\n        }\n    }\n\n    handleIncludeWormholesChange() {\n        let isChecked = document.getElementById(\"require-all-wormholes\").checked;\n        this.setState(\n            {\"option_include_all_wormholes\": isChecked}\n        );\n    }\n\n    handlePairWormholesChange() {\n        let isChecked = document.getElementById(\"pair-wormholes\").checked;\n        this.setState(\n            {\"option_pair_wormholes\": isChecked}\n        );\n    }\n\n    handleTargetRatioChange() {\n        let int_select = document.getElementById(\"target-ratio\");\n        let int_value = int_select.options[int_select.selectedIndex].value\n        if(int_value !== \"random\") int_value = parseInt(int_value);\n        this.setState({\"target_blue_total\": int_value});\n    }\n\n    loadDefault(index) {\n        let toLoad = this.default_layouts[index];\n        this.setLayout(toLoad, \"new_\"+index);\n        let loadedTitle = toLoad.title;\n        let new_message = \"Blank map '\"+loadedTitle+\"' displayed.\";\n        this.setState({\n            \"message\": new_message,\n            \"input_title\": loadedTitle,\n        });\n    }\n\n    loadCustomLayout(index) {\n        let toLoad = ls.get(this.props.layout_storage_key)[index];\n        let new_map = this.getLayoutFromJSON(toLoad.data);\n        let loadedTitle = toLoad.title;\n        let new_message = \"Custom layout '\"+loadedTitle+\"' displayed.\";\n        this.setMap(new_map);\n        this.setState({\n            \"message\": new_message,\n            \"input_title\": loadedTitle,\n            \"selected_item\": \"new_\"+index,\n        });\n    }\n\n    getNewLayout() {\n        let toLoad = this.default_layouts[0];\n        let new_map = this.getLayoutFromJSON(toLoad.data);\n        return new_map;\n    }\n\n    getMapString(map = this.state.map) {\n        let final_string = \"\";\n        let is_first = \"\";\n        for(let one_coor of map_string_order) {\n            let one_space = getObjFromCoord(one_coor, map.spaces);\n            if(one_space && one_space.type===MAP_SPACE_TYPES.SYSTEM && one_space.system) {\n                final_string+=is_first+one_space.system.id;\n            } else {\n                final_string+=is_first+\"0\";\n            }\n            is_first = \" \";\n        }\n        return final_string;\n    }\n\n    loadMapFromString(map_string = this.state.map_string) {\n        let new_map = this.state.map.makeCopy();\n        let new_bank = this.state.bank_systems;\n        let id_list = map_string.split(\" \");\n        for(let [index, one_id_string] of id_list.entries()) {\n            let one_id = parseInt(one_id_string);\n            if(one_id!==0) {\n                let one_system = new_bank.getSystemByID(one_id);\n                if(!one_system) {\n                    let one_system_space = new_map.getSpaceBySystemID(one_id);\n                    if(!one_system_space) {\n                        this.setState({\"message\":\"Space not found.\"});\n                        return;\n                    }\n                    one_system = one_system_space.system;\n                    one_system_space.type = MAP_SPACE_TYPES.OPEN;\n                    one_system_space.system = null;\n                    new_bank = this.syncBankSystems(new_map);\n                }\n                let new_space = getObjFromCoord(map_string_order[index], new_map.spaces);\n                if(!new_space) {\n                    this.setState({\"message\":\"Invalid: Too many systems listed.\"});\n                    return;\n                }\n                if(new_space.type!==MAP_SPACE_TYPES.OPEN && new_space.type!==MAP_SPACE_TYPES.SYSTEM) {\n                    this.setState({\"message\":\"Invalid: Placing system on improper space.\"});\n                    return;\n                }\n                if(new_space.type===MAP_SPACE_TYPES.SYSTEM && new_space.system.isMecatolRexSystem()) {\n                    this.setState({\"message\":\"Invalid: Systems on top of Mecatol Rex.\"});\n                    return;\n                }\n                if(new_space.type===MAP_SPACE_TYPES.OPEN) {\n                    new_space.type = MAP_SPACE_TYPES.SYSTEM;\n                }\n                new_space.system = one_system;\n                new_bank = this.syncBankSystems(new_map);\n            }\n        }\n        this.setState({\"message\": \"Map string loaded.\"});\n        this.setMap(new_map);\n    }\n\n    clickedSpace(index) {\n        let newState = Object.assign({},{\n            \"message\": \"\",\n            \"selected_bank_system\": this.state.selected_bank_system,\n        });\n        let new_map = this.state.map.makeCopy();\n        let clickedSpace = new_map.spaces[index];\n        let isChanged = false;\n\n        switch(clickedSpace.type) {\n            case MAP_SPACE_TYPES.OPEN:\n                if(newState.selected_bank_system !== null) {\n                    clickedSpace.system = newState.selected_bank_system;\n                    clickedSpace.type = MAP_SPACE_TYPES.SYSTEM;\n                    newState.selected_bank_system = null;\n                    isChanged = true;\n                }\n                break;\n            case MAP_SPACE_TYPES.SYSTEM:\n                if(!clickedSpace.system.isMecatolRexSystem()) {\n                    if(newState.selected_bank_system !== null) {\n                        let replacement_system = newState.selected_bank_system;\n                        newState.selected_bank_system = clickedSpace.system;\n                        clickedSpace.system = replacement_system;\n                        isChanged = true;\n                    } else {\n                        newState.selected_bank_system = clickedSpace.system;\n                        clickedSpace.system = null;\n                        clickedSpace.type = MAP_SPACE_TYPES.OPEN;\n                        isChanged = true;\n                    }\n                }\n                break;\n            default:\n                break;\n        }\n\n        if(isChanged) {\n            this.setState(newState);\n            this.setMap(new_map);\n        }\n\n    }\n\n    autoCompleteStart() {\n        if(!this.state.long_op) {\n            this.setState({\n                    \"message\": \"Thinking...\",\n                    \"long_op\": true,\n                },\n                () => {\n                    setTimeout(this.autoComplete.bind(this), 1);\n                }\n            );\n        }\n    }\n\n    autoComplete() {\n        let map_history = [{\n            \"map\": this.state.map.makeCopy(this.planet_box),\n            \"system_box\": this.state.bank_systems.makeCopy(),\n        }];\n        let gotamap = true;\n        while(!map_history[map_history.length-1].map.isComplete()) {\n            map_history = this._autoCompleteSteps(map_history, 1);\n            if(map_history===false) {\n                gotamap=false;\n                break;\n            }\n        }\n        let message = \"Unable to find a legal completion of this map.\";\n        if(gotamap) {\n            this.setMap(map_history[map_history.length-1].map);\n            message = \"Map completed randomly.\";\n            this.setState({\n                \"message\": message,\n                \"selected_bank_system\": null,\n                \"long_op\": false,\n            });\n        }\n    }\n\n    _autoCompleteSteps(current_history, steps_forward, current_try_total=0, backwards_length=null) {\n        if(backwards_length===null) backwards_length=current_history.length;\n        let starting_length = current_history.length;\n        for(let tries=current_try_total; tries<LOOPS_TO_TRY; tries++) {\n            let new_history = this._addOneSystem(current_history[current_history.length-1]);\n            if(!(new_history===false)) {\n                current_history.push(new_history);\n                if(current_history.length >= starting_length+steps_forward) {\n                    return current_history;\n                } else {\n                    return this._autoCompleteSteps(current_history, steps_forward-1, tries, backwards_length);\n                }\n            }\n        }\n        let steps_forward_add = 0;\n        while(current_history.length>=backwards_length) {\n            steps_forward_add++;\n            current_history.pop();\n        }\n        if(current_history.length===0) {\n            return false;\n        }\n        return this._autoCompleteSteps(\n            current_history,\n            steps_forward+steps_forward_add,\n            0,\n            backwards_length-1);\n    }\n\n    _addOneSystem(newest_history) {\n        let avail_sys_pool = [];\n        let system_box = newest_history.system_box;\n        let map = newest_history.map;\n        for(let one_sys of system_box.systems) {\n            let can_add = true;\n            if (\n                this.state.option_include_all_wormholes &&\n                one_sys.wormhole === null &&\n                system_box.getWormholeSystems().length >= map.getOpenSpacesTotal()\n            ) {\n                can_add = false;\n            } else {\n                if (this.state.option_pair_wormholes) {\n                    let total_needed = 0;\n                    let b_holes = system_box.getWormholeSystems(WORMHOLES.BETA).length;\n                    let a_holes = system_box.getWormholeSystems(WORMHOLES.ALPHA).length;\n                    if (b_holes === 1) total_needed++;\n                    if (a_holes === 1) total_needed++;\n                    if (\n                        total_needed >= map.getOpenSpacesTotal()\n                        &&\n                        (\n                            one_sys.wormhole === null\n                            ||\n                            (one_sys.wormhole !== WORMHOLES.BETA && a_holes !== 1)\n                            ||\n                            (one_sys.wormhole !== WORMHOLES.ALPHA && b_holes !== 1)\n                        )\n                    ) can_add = false;\n                }\n                if (can_add) avail_sys_pool.push(one_sys);\n            }\n        }\n        if(this.state.target_blue_total!==\"random\") {\n            let target_ratio = this.state.target_blue_total/(map.getPossibleSystemTotal()-this.state.target_blue_total);\n            let current_ratio = map.getBlueSystemTotal()/map.getRedSystemTotal();\n            if(target_ratio<current_ratio) {\n                let replacement_pool = [];\n                for(let one_sys of avail_sys_pool) {\n                    if(one_sys.isRed()) replacement_pool.push(one_sys);\n                }\n                if(replacement_pool.length>0) avail_sys_pool = replacement_pool;\n            } else if(target_ratio>current_ratio) {\n                let replacement_pool = [];\n                for(let one_sys of avail_sys_pool) {\n                    if(one_sys.isBlue()) replacement_pool.push(one_sys);\n                }\n                if(replacement_pool.length>0) avail_sys_pool = replacement_pool;\n            }\n        }\n        let chosen_system = avail_sys_pool[Math.floor(Math.random() * avail_sys_pool.length)];\n        let avail_space_pool = [];\n        for(let [index, one_space] of map.spaces.entries()) {\n            if(one_space.type===MAP_SPACE_TYPES.OPEN) avail_space_pool.push(index);\n        }\n        let chosen_space_index = avail_space_pool[Math.floor(Math.random() * avail_space_pool.length)];\n        let new_map = map.makeCopy();\n        new_map.spaces[chosen_space_index].type = MAP_SPACE_TYPES.SYSTEM;\n        new_map.spaces[chosen_space_index].system = chosen_system;\n        let new_box = this.syncBankSystems(new_map);\n\n        if(new_map.isLegal()) {\n            return {\n                \"map\": new_map,\n                \"system_box\": new_box,\n            }\n        } else {\n            return false;\n        }\n    }\n\n    getHomeValues(map = this.state.map, evars = this.state.eval_variables) {\n        let home_values = {};\n        for(let [index, one_space] of map.spaces.entries()) {\n            if(one_space.type === MAP_SPACE_TYPES.HOME) {\n                home_values[index.toString()] = map.getHomeValue(\n                    one_space, evars,\n                );\n            }\n        }\n        return home_values;\n    }\n\n    getBalanceDifference(home_values = this.state.home_values) {\n        let max = null;\n        let min = null;\n        for(let one_home_key in home_values) {\n            if(home_values.hasOwnProperty(one_home_key)) {\n                if (max === null || home_values[one_home_key] > max) max = home_values[one_home_key];\n                if (min === null || home_values[one_home_key] < min) min = home_values[one_home_key];\n            }\n        }\n        return max-min;\n    }\n\n    handleBalanceOptionChange(which_option) {\n        let options = Object.assign({}, this.state.balance_options);\n        options[which_option] = !options[which_option];\n        this.setState({\"balance_options\": options});\n    }\n\n    improveBalanceStart() {\n        if(!this.state.long_op) {\n            this.setState({\n                    \"message\": \"Thinking...\",\n                    \"long_op\": true,\n                },\n                ()=>{\n                    setTimeout(this.improveBalance.bind(this), 1);\n                }\n            );\n        }\n    }\n\n    improveBalance() {\n        return new Promise((resolve)=> {\n            let map = this.state.map;\n            let eligible_system_spaces = [];\n            for (let [index, one_space] of map.spaces.entries()) {\n                if (one_space.type === MAP_SPACE_TYPES.SYSTEM) {\n                    if (\n                        !one_space.system.isMecatolRexSystem()\n                        &&\n                        (!this.state.balance_options.dont_move_wormholes\n                            || one_space.system.wormhole === null)\n                        &&\n                        (!this.state.balance_options.dont_move_anomalies\n                            || one_space.system.anomaly === null)\n                        &&\n                        (!this.state.balance_options.dont_move_empty\n                            || one_space.system.wormhole !== null\n                            || one_space.system.anomaly !== null\n                            || one_space.system.planets.length > 0)\n                    ) eligible_system_spaces.push(index);\n                }\n            }\n            shuffle(eligible_system_spaces);\n            let found_it = false;\n            let new_map = null;\n            let new_hv = null;\n            let new_diff = null;\n            for(let a=0; a<eligible_system_spaces.length; a++) {\n                for(let b=0; b<eligible_system_spaces.length; b++) {\n                    if(a!==b) {\n                        new_map = this.state.map.makeCopy();\n                        let replaced_system = new_map.spaces[eligible_system_spaces[b]].system;\n                        new_map.spaces[eligible_system_spaces[b]].system = new_map.spaces[eligible_system_spaces[a]].system;\n                        new_map.spaces[eligible_system_spaces[a]].system = replaced_system;\n                        if (new_map.isLegal()) {\n                            new_hv = this.getHomeValues(new_map);\n                            new_diff = this.getBalanceDifference(new_hv);\n                            if (new_diff < this.state.balance_difference) {\n                                found_it = true;\n                                break;\n                            }\n                        }\n                    }\n                }\n                if(found_it) break;\n            }\n            if (found_it) {\n                this.setMap(new_map, new_hv, new_diff);\n                this.setState({\n                    \"message\": \"Balance gap has been improved.\",\n                    \"long_op\": false,\n                });\n            } else {\n                this.setState({\n                    \"message\": \"Failed to improve balance gap.\",\n                    \"long_op\": false,\n                });\n            }\n        });\n    }\n\n    render() {\n        let is_legal = (<label className=\"button is-outlined is-small is-danger\">Illegal</label>);\n        if(this.state.map.isLegal()) is_legal = (<label className=\"button is-small is-outlined is-success\">Legal</label>);\n        let is_complete = (<label className=\"button is-outlined is-small is-danger\">Incomplete</label>);\n        if(this.state.map.isComplete()) is_complete = (<label className=\"button is-small is-outlined is-success\">Complete</label>);\n\n        let options = [];\n        for(let [index, one_default] of this.default_layouts.entries()) {\n            options.push(<option\n                value={\"new_\"+index}\n                key={\"new_\"+index}\n            >\n                New from default layout {one_default.title}\n            </option>);\n        }\n        for(let [index, one_custom_l] of (ls.get(this.props.layout_storage_key) || []).entries()) {\n            if(this.getLayoutFromJSON(one_custom_l.data).areWarpsLogical()) {\n                options.push(<option\n                    value={\"newc_\"+index}\n                    key={\"newc_\"+index}\n                >\n                    New from custom layout {one_custom_l.title}\n                </option>);\n            }\n        }\n        for(let [index, one_saved] of this.state.saved_data.entries()) {\n            options.push(\n                <option value={index} key={index}>{one_saved.title}</option>\n            );\n        }\n\n        let eval_options = [];\n        for(let [index, one_default] of default_variables.entries()) {\n            eval_options.push(<option\n                value={\"default_\"+index}\n                key={\"default_\"+index}\n            >\n                {one_default.title}\n            </option>\n            );\n        }\n        for(let [index, one_custom] of (ls.get(this.props.eval_storage_key) || []).entries()) {\n            eval_options.push(<option\n                value={\"custom_\"+index}\n                key={\"custom_\"+index}\n            >\n                {one_custom.title}\n            </option>\n            );\n        }\n\n        let auto_complete_ratios = [(<option value=\"random\" key=\"random\">B/R Target Ratio: Random</option>)];\n        let red_total = this.state.map.getRedSystemTotal();\n        let blue_total = this.state.map.getBlueSystemTotal();\n        let open_spaces = this.state.map.getOpenSpacesTotal();\n        let blue_avail = this.state.bank_systems.getBlueSystemTotal();\n        let red_avail = this.state.bank_systems.getRedSystemTotal();\n        for(let s=0; s<=open_spaces; s++) {\n            if(s<=blue_avail && open_spaces-s<=red_avail) {\n                auto_complete_ratios.push((\n                    <option\n                        value={s+blue_total}\n                        key={s+blue_total}\n                    >\n                        B/R Target Ratio: {s+blue_total}/{open_spaces-s+red_total}\n                    </option>\n                ));\n            }\n\n        }\n\n        let bal_diff =  null;\n        if(this.state.balance_difference!==null) {\n            bal_diff = (<p className=\"control\"><label className=\"label\">Balance Gap: {this.state.balance_difference}</label></p>);\n        }\n\n        let message = null;\n        if(this.state.message !== null && this.state.message!==\"\") {\n            message = (<blockquote>{this.state.message}</blockquote>);\n        }\n\n\n        return(\n            <div className=\"block\">\n                <h2 className=\"title is-size-4\">Map Editor</h2>\n                <div className=\"block map-lab-control-panel\">\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Saved/Defaults:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                <p className=\"control\">\n                                    <span className=\"select is-small\">\n                                        <select id=\"layout-select\" value={this.state.selected_item}\n                                                onChange={() => this.handleSelectChange()}>\n                                            {options}\n                                        </select>\n                                    </span>\n                                </p>\n                                <p className=\"control\">\n                                    <JSONDownloadButton\n                                        title=\"Download All\"\n                                        getDownloadInfo={() => this.getAllLayoutJSONFileInfo()}\n                                        className=\"button is-small\"\n                                    />\n                                </p>\n                                <p className=\"control\">\n                                    <button onClick={() => this.deleteAll()} className=\"button is-small\">Delete All\n                                    </button>\n                                </p>\n                                <JSONUploadButton\n                                    id=\"layout-json-upload\"\n                                    title=\"Upload\"\n                                    handleJSON={(data) => this.addLayoutsFromJSON(data)}\n                                    className=\"button is-small\"\n                                />\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Map Title:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                <p className=\"control\">\n                                    <input\n                                        className=\"input is-small\"\n                                        type=\"text\"\n                                        id=\"layout-title\"\n                                        value={this.state.input_title}\n                                        onChange={function() {\n                                            this.setState(\n                                                {\n                                                    \"input_title\": document.getElementById(\"layout-title\").value,\n                                                    \"message\": \"\"\n                                                }\n                                            );\n                                        }.bind(this)}\n                                    />\n                                </p>\n                                <p className=\"control\">\n                                    <button className=\"button is-small\" onClick={()=>this.saveCurrent()}>Save</button>\n                                </p>\n                                <p className=\"control\">\n                                    <button className=\"button is-small\" onClick={()=>this.handleSelectChange()}>Reset</button>\n                                </p>\n                                <p className=\"control\">\n                                    <button\n                                        className=\"button is-small\"\n                                        onClick={()=>this.deleteCurrent()}\n                                        disabled={this.isSelectNew(this.state.selected_item)}\n                                    >Delete</button>\n                                </p>\n                                <p className=\"control\">\n                                    <JSONDownloadButton\n                                        title=\"Download\"\n                                        className=\"button is-small\"\n                                        getDownloadInfo={()=>this.getCurrentLayoutJSONFileInfo()}\n                                    />\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">System Display:</label>\n                        </div>\n                        <div className=\"field-body\">\n                             <div className=\"field is-grouped is-grouped-multiline\">\n                                <p className=\"control\">\n                                    <span className=\"select is-small\">\n                                        <select\n                                            id=\"select-system-display\"\n                                            value={this.state.system_format}\n                                            onChange={()=>this.handleFormatDisplayChange()}\n                                        >\n                                            <option value={SYSTEM_FORMATS.STREAMLINED}>Streamlined</option>\n                                            <option value={SYSTEM_FORMATS.STREAMLINED_WITH_NAME}>Streamlined + Name</option>\n                                            <option value={SYSTEM_FORMATS.COLORBLIND_FRIENDLY}>Colorblind Friendly</option>\n                                            <option value={SYSTEM_FORMATS.COLORBLIND_FRIENDLY_WITH_NAME}>Colorblind Friendly + Name</option>\n                                            <option value={SYSTEM_FORMATS.ID_ONLY}>ID Only</option>\n                                        </select>\n                                    </span>\n                                </p>\n                                <p className=\"control\">\n                                    <label className=\"label\">Map Status:</label>\n                                </p>\n                                <p className=\"control\">\n                                    {is_complete}\n                                </p>\n                                <p className=\"control\">\n                                    {is_legal}\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Map String:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                <p className=\"control is-expanded\">\n                                    <input\n                                        className=\"input is-small\"\n                                        type=\"text\"\n                                        id=\"map-string\"\n                                        value={this.state.map_string}\n                                        onChange={function() {\n                                            this.setState(\n                                                {\n                                                    \"map_string\": document.getElementById(\"map-string\").value,\n                                                    \"message\": \"\"\n                                                }\n                                            );\n                                        }.bind(this)}\n                                    />\n                                </p>\n                                <p className=\"control\">\n                                    <button className=\"button is-small\" onClick={()=>this.loadMapFromString()}>\n                                        Load From String\n                                    </button>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"columns\">\n                    <div className=\"column is-one-fifth-desktop is-narrow-tablet map-controls-column\">\n                        <div className=\"block content for-message\">\n                            {message}\n                        </div>\n                        <div className=\"field\">\n                            <label className=\"label\">Auto-Complete</label>\n                            <p className=\"control\">\n                                <input\n                                    id=\"require-all-wormholes\"\n                                    type=\"checkbox\"\n                                    checked={this.state.option_include_all_wormholes}\n                                    onChange={()=>this.handleIncludeWormholesChange()}\n                                />\n                                <label htmlFor=\"require-all-wormholes\"> Require Wormholes</label>\n                            </p>\n                            <p className=\"control\">\n                                <input\n                                    id=\"pair-wormholes\"\n                                    type=\"checkbox\"\n                                    checked={this.state.option_pair_wormholes}\n                                    onChange={()=>this.handlePairWormholesChange()}\n                                />\n                                <label htmlFor=\"pair-wormholes\"> Pair Wormholes</label>\n                            </p>\n                            <p className=\"control\">\n                                <span className=\"select is-small\">\n                                    <select\n                                        id=\"target-ratio\"\n                                        value={this.state.target_blue_total}\n                                        onChange={()=>this.handleTargetRatioChange()}\n                                    >\n                                        {auto_complete_ratios}\n                                    </select>\n                                </span>\n                            </p>\n                            <p className=\"control\">\n                                <button\n                                    onClick={()=>this.autoCompleteStart()}\n                                    disabled={\n                                        !this.state.map.isLegal()\n                                        || this.state.map.isComplete()\n                                        || this.state.long_op===true\n                                    }\n                                    className=\"button is-small is-primary\"\n                                >\n                                    Auto-Complete Map\n                                </button>\n                            </p>\n                        </div>\n                        <div className=\"field\">\n                            <label className=\"label\">Improve Balance</label>\n                            <p className=\"control\">\n                                <span className=\"select is-small\">\n                                    <select id=\"eval-select\" value={this.state.eval_option}\n                                            onChange={(event) => this.handleEvalChange(event.target.value)}>\n                                        {eval_options}\n                                    </select>\n                                </span>\n                            </p>\n                            {bal_diff}\n                            <p className=\"control\">\n                                <input\n                                    id=\"dont-move-wormholes\"\n                                    type=\"checkbox\"\n                                    checked={this.state.balance_options.dont_move_wormholes}\n                                    onChange={()=>this.handleBalanceOptionChange(\"dont_move_wormholes\")}\n                                />\n                                <label htmlFor=\"dont-move-wormholes\"> Lock Wormholes</label>\n                            </p>\n                            <p className=\"control\">\n                                <input\n                                    id=\"dont-move-anomalies\"\n                                    type=\"checkbox\"\n                                    checked={this.state.balance_options.dont_move_anomalies}\n                                    onChange={()=>this.handleBalanceOptionChange(\"dont_move_anomalies\")}\n                                />\n                                 <label htmlFor=\"dont-move-anomalies\"> Lock Anomalies</label>\n                            </p>\n                            <p className=\"control\">\n                                <input\n                                    id=\"dont-move-empty\"\n                                    type=\"checkbox\"\n                                    checked={this.state.balance_options.dont_move_empty}\n                                    onChange={()=>this.handleBalanceOptionChange(\"dont_move_empty\")}\n                                />\n                                <label htmlFor=\"dont-move-empty\"> Lock Empty Spaces</label>\n                            </p>\n                            <p className=\"control\">\n                                <button\n                                    onClick={()=>this.improveBalanceStart()}\n\n                                    disabled={!this.state.map.isComplete() || this.state.long_op===true}\n                                    className=\"button is-small is-primary\"\n                                >\n                                    Improve Balance\n                                </button>\n                            </p>\n                        </div>\n                        <SystemBankComponent\n                            systems={this.state.bank_systems}\n                            active_system={this.state.selected_bank_system}\n                            setActiveSystem={(system)=>this.setActiveBankSystem(system)}\n                            system_format={this.state.system_format}\n                            onSelectedSystemDrag={(event)=>this.onSelectedSystemDrag(event)}\n                            onSystemDragEnd={(event)=>this.onSystemDragEnd(event)}\n                            onSystemDropped={(event)=>this.onSystemDropped(event,null)}\n                            eval_variables={this.state.eval_variables}\n                        />\n                    </div>\n                    <div className=\"column map-container\">\n                        <MapComponent\n                            map={this.state.map}\n                            eval_variables={this.state.eval_variables}\n                            system_format={this.state.system_format}\n                            system_box={this.system_box}\n                            clickedSpace={(index)=>this.clickedSpace(index)}\n                            map_class=\"map-map\"\n                            systems_draggable={!this.state.long_op}\n                            onSystemDrag={(event, system)=>this.onSystemDrag(event, system)}\n                            onSystemDragEnd={(event)=>this.onSystemDragEnd(event)}\n                            onSystemDropped={(event, space)=>this.onSystemDropped(event, space)}\n                            home_values={this.state.home_values}\n                        />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}","import React from 'react';\nimport $ from 'jquery';\n\nimport {warp_configs} from \"../data/warp_data\";\n\nimport {\n    Map,\n    MapSpace,\n    areCoordsInList,\n} from \"../map-logic\";\nimport {\n    SYSTEM_FORMATS,\n    MapComponent,\n    MAP_SPACE_TYPES,\n} from \"../map-components\";\nimport {\n    JSONDownloadButton,\n    JSONUploadButton,\n} from \"../download-helpers\";\nimport {BaseEditor} from \"./base-editor\";\nimport {compareByID} from \"../utilities\";\n\nwindow.jQuery = $;\n\nexport class LayoutEditor extends BaseEditor {\n    constructor(props) {\n        super(props);\n        this.state.map = this.getNewLayout();\n        this.state.show_warps = false;\n        this.state.show_wormholes = false;\n        this.state.show_anomalies = false;\n    }\n\n    handleSelectChange() {\n        let new_value = this.getSelectValue();\n        if(new_value === \"new\") {\n            this.setNewLayout();\n        } else {\n            let valIndex = parseInt(new_value);\n            this.setLayout(this.state.saved_data[valIndex], new_value);\n        }\n    }\n\n    isSelectNew(selected_item=null) {\n        if(selected_item !== null) return selected_item===\"new\";\n        return this.getSelectValue() === \"new\";\n    }\n\n    getNewStringValue() {\n        return \"new\";\n    }\n\n    handleWarpChange() {\n        let isChecked = document.getElementById(\"warp-checkbox\").checked;\n        this.setState({\"show_warps\": isChecked});\n    }\n    handleWormholeChange() {\n        let isChecked = document.getElementById(\"wormhole-checkbox\").checked;\n        this.setState({\"show_wormholes\": isChecked});\n    }\n    handleAnomaliesChange() {\n        let isChecked = document.getElementById(\"anomalies-checkbox\").checked;\n        this.setState({\"show_anomalies\": isChecked});\n    }\n\n    clickedSpace(index) {\n        let new_map = this.state.map.makeCopy();\n        let new_message = \"\";\n        let clickedSpace = new_map.spaces[index];\n        let go_next_type = false;\n\n        switch(clickedSpace.type) {\n            case MAP_SPACE_TYPES.WARP:\n                if(!this.state.show_warps) {\n                    go_next_type=true;\n                    clickedSpace.warp_spaces = null;\n                } else {\n                    clickedSpace.warp_spaces = this._getNextWarp(new_map, clickedSpace);\n                    if(clickedSpace.warp_spaces===null) go_next_type=true;\n                }\n                break;\n            case MAP_SPACE_TYPES.SYSTEM:\n                clickedSpace.system = this._getNextSystem(new_map, clickedSpace);\n                if(clickedSpace.system===null) go_next_type = true;\n                break;\n            default:\n                go_next_type = true;\n                break;\n        }\n        if(go_next_type) {\n            let keep_going = true;\n            while(keep_going) {\n                clickedSpace.type++;\n                if(clickedSpace.type > MAP_SPACE_TYPES.WARP) {\n                    clickedSpace.type = 1;\n                }\n                switch(clickedSpace.type) {\n                    case MAP_SPACE_TYPES.SYSTEM:\n                        clickedSpace.system = this._getNextSystem(new_map, clickedSpace);\n                        if(clickedSpace.system!==null) keep_going = false;\n                        break;\n                    case MAP_SPACE_TYPES.WARP:\n                        if(this.state.show_warps){\n                            clickedSpace.warp_spaces = this._getNextWarp(new_map, clickedSpace);\n                            if(clickedSpace.warp_spaces!==null) keep_going=false;\n                        }\n                        break;\n                    default:\n                        keep_going = false;\n                        break;\n                }\n            }\n\n        }\n        if(!new_map.areWarpsLogical()) {\n            new_message = \"Warps do not yet connect to legal spaces. Layout not usable until warps connect.\";\n        }\n        this.setMap(new_map);\n        this.setState({\"message\": new_message,})\n    }\n\n    loadDefault(index) {\n        let toLoad = this.default_layouts[index];\n        let new_map = this.getLayoutFromJSON(toLoad.data);\n        let loadedTitle = toLoad.title;\n        let new_message = \"Default layout '\"+loadedTitle+\"' displayed.\";\n        this.setMap(new_map);\n        this.setState({\n            \"message\": new_message,\n            \"input_title\": loadedTitle,\n            \"selected_item\": this.getNewStringValue(),\n        });\n    }\n\n    getNewLayout() {\n        let starting_space = new MapSpace(0,0,0);\n        return new Map(true, starting_space, 3);\n    }\n\n    setNewLayout() {\n        let map = this.getNewLayout();\n        this.setMap(map);\n        this.setState({\"selected_item\": this.getNewStringValue(), \"message\": \"\", \"input_title\": \"\"});\n    }\n\n    _getNextWarp(map, space) {\n        let proposed_warp = space.warp_spaces;\n        if(proposed_warp === null) {\n            proposed_warp = 0;\n        } else {\n            proposed_warp++;\n        }\n        while(proposed_warp < warp_configs.length) {\n            let proposed_config = warp_configs[proposed_warp];\n            let is_legal = true;\n            for(let one_warp of proposed_config) {\n                for(let one_coord of one_warp) {\n                    if(!areCoordsInList(\n                        space.getWarpDirectionCoordinates(one_coord),\n                        map.spaces\n                    )) {\n                        is_legal = false;\n                        break;\n                    }\n                }\n            }\n            if(is_legal) {\n                break;\n            }\n            proposed_warp++;\n        }\n        if(proposed_warp >= warp_configs.length) {\n            return null;\n        }\n        return proposed_warp;\n    }\n\n    _getNextSystem(map, space) {\n        let eligible_systems = [];\n        let current_id = 0;\n        if(space.system!==null) current_id=space.system.id;\n        for(let one_system of this.system_box.systems) {\n            if(\n                map.getSpaceBySystemID(one_system.id)===null\n                &&\n                one_system.id>current_id\n                &&\n                (\n                    one_system.isMecatolRexSystem()\n                    ||\n                    (one_system.wormhole!==null && this.state.show_wormholes)\n                    ||\n                    (one_system.anomaly!==null && this.state.show_anomalies)\n                )\n            ) {\n                eligible_systems.push(one_system);\n            }\n        }\n        if(eligible_systems.length===0) return null;\n        eligible_systems.sort(compareByID);\n        return eligible_systems[0];\n    }\n\n    render() {\n        let options = [(<option value=\"new\" key=\"new\">New Layout</option>)];\n        for(let [index, one_saved] of this.state.saved_data.entries()) {\n            options.push(\n                <option value={index} key={index}>{one_saved.title}</option>\n            );\n        }\n        let defaults = [];\n        for(let [index, one_default] of this.default_layouts.entries()) {\n            defaults.push(\n                <p className=\"control\" key={index}>\n                    <button\n                        className=\"button is-small is-link\"\n                        onClick={()=>this.loadDefault(index)}\n                        key={\"default_layout_\"+index}\n                    >\n                        {one_default.title}\n                    </button>\n                </p>\n            )\n        }\n        let message = null;\n        if(this.state.message !== null && this.state.message!==\"\") {\n            message = (<blockquote>{this.state.message}</blockquote>);\n        }\n\n        return(\n            <div className=\"block\">\n                <h2 className=\"title is-size-4\">Layout Editor</h2>\n                <div className=\"block map-lab-control-panel\">\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Default Layouts:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                {defaults}\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Saved Layouts:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                <p className=\"control\">\n                                    <span className=\"select is-small\">\n                                        <select\n                                            id=\"layout-select\"\n                                            value={this.state.selected_item}\n                                            onChange={()=>this.handleSelectChange()}\n                                        >\n                                            {options}\n                                        </select>\n                                    </span>\n                                </p>\n                                <p className=\"control\">\n                                    <JSONDownloadButton\n                                        title=\"Download All\"\n                                        getDownloadInfo={()=>this.getAllLayoutJSONFileInfo()}\n                                        className=\"button is-small\"\n                                    />\n                                </p>\n                                <p className=\"control\">\n                                    <button onClick={()=>this.deleteAll()} className=\"button is-small\">\n                                        Delete All\n                                    </button>\n                                </p>\n                                <p className=\"control\">\n                                    <JSONUploadButton\n                                        id=\"layout-json-upload\"\n                                        title=\"Upload\"\n                                        handleJSON={(data)=>this.addLayoutsFromJSON(data)}\n                                        className=\"button is-small\"\n                                    />\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Layout Title:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                <p className=\"control\">\n                                    <input\n                                        type=\"text\"\n                                        id=\"layout-title\"\n                                        value={this.state.input_title}\n                                        className=\"input is-small\"\n                                        onChange={function() {\n                                            this.setState(\n                                                {\n                                                    \"input_title\": document.getElementById(\"layout-title\").value,\n                                                    \"message\": \"\"\n                                                }\n                                            );\n                                        }.bind(this)}\n                                    />\n                                </p>\n                                <p className=\"control\">\n                                    <button className=\"button is-small\" onClick={()=>this.saveCurrent()}>Save</button>\n                                </p>\n                                <p className=\"control\">\n                                    <button className=\"button is-small\" onClick={()=>this.handleSelectChange()}>Reset</button>\n                                </p>\n                                <p className=\"control\">\n                                    <button\n                                        onClick={()=>this.deleteCurrent()}\n                                        disabled={this.isSelectNew(this.state.selected_item)}\n                                        className=\"button is-small\"\n                                    >Delete</button>\n                                </p>\n                                <p className=\"control\">\n                                    <JSONDownloadButton\n                                        title=\"Download\"\n                                        getDownloadInfo={()=>this.getCurrentLayoutJSONFileInfo()}\n                                        className=\"button is-small\"\n                                    />\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"columns\">\n                        <div className=\"column is-one-fifth-desktop is-narrow-tablet map-controls-column\">\n                            <div className=\"block content for-message\">\n                                {message}\n                            </div>\n                            <div className=\"field\">\n                                <label className=\"label\">Click Cycle</label>\n                                <p className=\"control\">\n                                    <input\n                                        type=\"checkbox\"\n                                        checked={this.state.show_warps}\n                                        onChange={()=>this.handleWarpChange()}\n                                        id=\"warp-checkbox\"\n                                    />\n                                    <label htmlFor=\"warp-checkbox\"> Include Warps in Click Cycle</label>\n                                </p>\n                                <p className=\"control\">\n                                    <input\n                                        type=\"checkbox\"\n                                        checked={this.state.show_wormholes}\n                                        onChange={()=>this.handleWormholeChange()}\n                                        id=\"wormhole-checkbox\"\n                                    />\n                                    <label htmlFor=\"wormhole-checkbox\"> Include Womholes in Click Cycle</label>\n                                </p>\n                                <p className=\"control\">\n                                    <input\n                                        type=\"checkbox\"\n                                        checked={this.state.show_anomalies}\n                                        onChange={()=>this.handleAnomaliesChange()}\n                                        id=\"anomalies-checkbox\"\n                                    />\n                                    <label htmlFor=\"anomalies-checkbox\"> Include Anomalies in Click Cycle</label>\n                                </p>\n                            </div>\n                        </div>\n                        <div className=\"column map-container\">\n                            <MapComponent\n                                map={this.state.map}\n                                system_format={SYSTEM_FORMATS.STREAMLINED}\n                                system_box={this.system_box}\n                                clickedSpace={(index)=>this.clickedSpace(index)}\n                                map_class=\"layout-map\"\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}","import React from 'react';\nimport {PLANET_EVAL_STRATEGIES} from \"./map-logic\";\n\nexport const EVAL_ASPECTS = {\n    \"BASE_PLANET_MOD\": \"BASE_PLANET_MOD\",\n    \"RESOURCES_MULTIPLIER\": \"RESOURCES_MULTIPLIER\",\n    \"INFLUENCE_MULTIPLIER\": \"INFLUENCE_MULTIPLIER\",\n    \"TECH_MOD\": \"TECH_MOD\",\n    \"TECH_PROPULSION_MOD\": \"TECH_PROPULSION_MOD\",\n    \"TECH_WARFARE_MOD\": \"TECH_WARFARE_MOD\",\n    \"TECH_BIOTIC_MOD\": \"TECH_BIOTIC_MOD\",\n    \"TECH_CYBERNETIC_MOD\": \"TECH_CYBERNETIC_MOD\",\n    \"PLANET_STRATEGY\": \"PLANET_STRATEGY\",\n    \"NONZERO_RESOURCES_MOD\": \"NONZERO_RESOURCES_MOD\",\n    \"NONZERO_INFLUENCE_MOD\": \"NONZERO_INFLUENCE_MOD\",\n    \"TRAIT_CULTURAL_MOD\": \"TRAIT_CULTURAL_MOD\",\n    \"TRAIT_HAZARDOUS_MOD\": \"TRAIT_HAZARDOUS_MOD\",\n    \"TRAIT_INDUSTRIAL_MOD\": \"TRAIT_INDUSTRIAL_MOD\",\n    \"SINGLE_PLANET_MOD\": \"SINGLE_PLANET_MOD\",\n    \"MULTI_PLANET_MOD\": \"MULTI_PLANET_MOD\",\n    \"MATCHING_PLANETS_MOD\": \"MATCHING_PLANETS_MOD\",\n    \"NONMATCHING_PLANETS_MOD\": \"NONMATCHING_PLANETS_MOD\",\n    \"MECATOL_REX_SYS_MOD\": \"MECATOL_REX_SYS_MOD\",\n    \"DISTANCE_MOD_BASE\": \"DISTANCE_MOD_BASE\",\n    \"DISTANCE_MOD_PLANET\": \"DISTANCE_MOD_PLANET\",\n    \"DISTANCE_MOD_EMPTY\": \"DISTANCE_MOD_EMPTY\",\n    \"DISTANCE_MOD_SUPERNOVA\": \"DISTANCE_MOD_SUPERNOVA\",\n    \"DISTANCE_MOD_ASTEROID_FIELD\": \"DISTANCE_MOD_ASTEROID_FIELD\",\n    \"DISTANCE_MOD_GRAVITY_RIFT\": \"DISTANCE_MOD_GRAVITY_RIFT\",\n    \"DISTANCE_MOD_EMPTY_WORMHOLE\": \"DISTANCE_MOD_EMPTY_WORMHOLE\",\n    \"DISTANCE_MOD_PLANET_WORMHOLE\": \"DISTANCE_MOD_PLANET_WORMHOLE\",\n    \"DISTANCE_MOD_NEBULA\": \"DISTANCE_MOD_NEBULA\",\n    \"DISTANCE_MOD_ADJACENT_TO_OPPONENT\": \"DISTANCE_MOD_ADJACENT_TO_OPPONENT\",\n    \"DISTANCE_MULTIPLIER\": \"DISTANCE_MULTIPLIER\",\n};\n\n\nexport class EvaluatorLine extends React.Component {\n    render() {\n        let null_box = null;\n        let nul_val = this.props.num_value===false;\n        if(this.props.hasNullBox) {\n            null_box = (<p className=\"control checkbox-holder\"><input\n                    id={this.props.id+\"-null-box\"}\n                    type=\"checkbox\"\n                    checked={nul_val}\n                    onChange={event => this.props.onNullChange(event.target.checked)}\n            /> Impassable&nbsp;</p>);\n        }\n        let num_value = this.props.num_value;\n        if(num_value===false) num_value = \"\";\n        return(\n            <div className=\"field line-container\">\n                <div>\n                    <label className=\"label\">{this.props.label}:</label>\n                </div>\n                <div>\n                    <div className=\"field all-parts\">\n                        <div className=\"both-controls\">\n                            <div className=\"field is-horizontal input-only\">\n                                <div className=\"m\">\n                                    {this.props.m}\n                                </div>\n                                <p className=\"control\">\n                                     <input\n                                        type=\"number\"\n                                        id={this.props.id+\"-num\"}\n                                        value={num_value}\n                                        className=\"input is-small\"\n                                        onChange={event => this.props.onInputChange(parseInt(event.target.value))}\n                                        disabled={nul_val}\n                                    />\n                                </p>\n                            </div>\n                            {null_box}\n                        </div>\n                        <div className=\"info-container\">\n                            <i className=\"fas fa-info-circle\"></i>\n                            <div className=\"input-info\">\n                                {this.props.helperText}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\n\nexport class EvaluatorForm extends React.Component {\n    reportChange(which_aspect, value, distance=null) {\n        this.props.changeHandler(which_aspect, value, distance);\n    }\n\n    reportNullChange(which_aspect, value) {\n        if(value===false) {\n            this.reportChange(which_aspect, 0);\n        } else {\n            this.reportChange(which_aspect, false);\n        }\n    }\n\n    render() {\n        return(\n            <div className=\"block content evaluator-form\">\n                <div className=\"form-container\">\n                    <h3>Planet Evaluation</h3>\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Base Planet\"\n                        num_value={this.props.values.BASE_PLANET_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.BASE_PLANET_MOD, value)}\n                        helperText=\"Base value of each planet.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Resources\"\n                        num_value={this.props.values.RESOURCES_MULTIPLIER}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.RESOURCES_MULTIPLIER, value)}\n                        helperText=\"Number to multiply planet resource value by.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Influence\"\n                        num_value={this.props.values.INFLUENCE_MULTIPLIER}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.INFLUENCE_MULTIPLIER, value)}\n                        helperText=\"Number to multiply planet influence value by.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Tech\"\n                        num_value={this.props.values.TECH_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.TECH_MOD, value)}\n                        helperText=\"Number to add if the planet has a tech specialty.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Propulsion Tech\"\n                        num_value={this.props.values.TECH_PROPULSION_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.TECH_PROPULSION_MOD, value)}\n                        helperText=\"Number to add if the planet has a propulsion tech specialty.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Warfare Tech\"\n                        num_value={this.props.values.TECH_WARFARE_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.TECH_WARFARE_MOD, value)}\n                        helperText=\"Number to add if the planet has a warfare tech specialty.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Biotic Tech\"\n                        num_value={this.props.values.TECH_BIOTIC_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.TECH_BIOTIC_MOD, value)}\n                        helperText=\"Number to add if the planet has a biotic tech specialty.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Cybernetic Tech\"\n                        num_value={this.props.values.TECH_CYBERNETIC_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.TECH_CYBERNETIC_MOD, value)}\n                        helperText=\"Number to add if the planet has a cybernetic tech specialty.\"\n                    />\n                    <div className=\"field line-container\">\n                        <div>\n                            <label className=\"label\">Planet Eval Strategy:</label>\n                        </div>\n                        <div>\n                            <div className=\"field is-grouped\">\n                                <div className=\"field is-horizontal\">\n                                    <p className=\"control\">\n                                        <span className=\"select is-small\">\n                                            <select\n                                                value={this.props.values.PLANET_STRATEGY}\n                                                onChange={event => this.reportChange(\n                                                    EVAL_ASPECTS.PLANET_STRATEGY, event.target.value\n                                                )}\n                                            >\n                                                <option\n                                                    value={PLANET_EVAL_STRATEGIES.SUM}\n                                                    key={PLANET_EVAL_STRATEGIES.SUM}\n                                                >\n                                                    Sum\n                                                </option>\n                                                <option\n                                                    value={PLANET_EVAL_STRATEGIES.GREATEST}\n                                                    key={PLANET_EVAL_STRATEGIES.GREATEST}\n                                                >\n                                                    Greatest\n                                                </option>\n                                                <option\n                                                    value={PLANET_EVAL_STRATEGIES.GREATEST_PLUS_TECH}\n                                                    key={PLANET_EVAL_STRATEGIES.GREATEST_PLUS_TECH}\n                                                >\n                                                    Greatest+Tech\n                                                </option>\n                                            </select>\n                                        </span>\n                                    </p>\n                                </div>\n                                <div className=\"info-container\">\n                                    <i className=\"fas fa-info-circle\"></i>\n                                    <div className=\"input-info\">\n                                        How to combine resources, influence and tech values above.\n                                        <br /><br />Sum = R+I+T\n                                        <br /><br />Greatest = largest of R/I/T\n                                        <br /><br />Greatest+Tech = largest of R/I, +T\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Resources > 0\"\n                        num_value={this.props.values.NONZERO_RESOURCES_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.NONZERO_RESOURCES_MOD, value)}\n                        helperText=\"Number to add if planet resource value is greater than 0.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Influence > 0\"\n                        num_value={this.props.values.NONZERO_INFLUENCE_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.NONZERO_INFLUENCE_MOD, value)}\n                        helperText=\"Number to add if planet influence value is greater than 0.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Cultural Trait\"\n                        num_value={this.props.values.TRAIT_CULTURAL_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.TRAIT_CULTURAL_MOD, value)}\n                        helperText=\"Number to add if the planet has the cultural trait.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Hazardous Trait\"\n                        num_value={this.props.values.TRAIT_HAZARDOUS_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.TRAIT_HAZARDOUS_MOD, value)}\n                        helperText=\"Number to add if the planet has the hazardous trait.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Industrial Trait\"\n                        num_value={this.props.values.TRAIT_INDUSTRIAL_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.TRAIT_INDUSTRIAL_MOD, value)}\n                        helperText=\"Number to add if the planet has the industrial trait.\"\n                    />\n                    <h3>System Evaluation</h3>\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Single Planet System\"\n                        num_value={this.props.values.SINGLE_PLANET_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.SINGLE_PLANET_MOD, value)}\n                        helperText=\"Number to add if the system has exactly 1 planet.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Multi-planet System\"\n                        num_value={this.props.values.MULTI_PLANET_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.MULTI_PLANET_MOD, value)}\n                        helperText=\"Number to add if the system has more than 1 planet.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Matching Planets System\"\n                        num_value={this.props.values.MATCHING_PLANETS_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.MATCHING_PLANETS_MOD, value)}\n                        helperText=\"Number to add if a system has 2 planets with the same trait.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Non-Matching Planets System\"\n                        num_value={this.props.values.NONMATCHING_PLANETS_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.NONMATCHING_PLANETS_MOD, value)}\n                        helperText=\"Number to add if a system has 2 planets with different traits.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Mecatol Rex System\"\n                        num_value={this.props.values.MECATOL_REX_SYS_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.MECATOL_REX_SYS_MOD, value)}\n                        helperText=\"Number to add if the system contains Mecatol Rex.\"\n                    />\n                    <h3>Home to System Distance Evaluation</h3>\n                    <h4>Distance Measurement</h4>\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Distance Base\"\n                        num_value={this.props.values.DISTANCE_MOD_BASE}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_BASE, value)}\n                        helperText=\"Base distance unit for every space moved through.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Planet\"\n                        num_value={this.props.values.DISTANCE_MOD_PLANET}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_PLANET, value)}\n                        helperText=\"Distance modifier for systems with 1 or more planets.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_PLANET, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Empty Space\"\n                        num_value={this.props.values.DISTANCE_MOD_EMPTY}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_EMPTY, value)}\n                        helperText=\"Distance modifier for empty space systems.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_EMPTY, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Supernova\"\n                        num_value={this.props.values.DISTANCE_MOD_SUPERNOVA}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_SUPERNOVA, value)}\n                        helperText=\"Distance modifier for supernova systems.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_SUPERNOVA, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Asteroid\"\n                        num_value={this.props.values.DISTANCE_MOD_ASTEROID_FIELD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_ASTEROID_FIELD, value)}\n                        helperText=\"Distance modifier for asteroid field systems.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_ASTEROID_FIELD, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Gravity Rift\"\n                        num_value={this.props.values.DISTANCE_MOD_GRAVITY_RIFT}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_GRAVITY_RIFT, value)}\n                        helperText=\"Distance modifier for gravity rift systems.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_GRAVITY_RIFT, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Wormholes Without Planets\"\n                        num_value={this.props.values.DISTANCE_MOD_EMPTY_WORMHOLE}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_EMPTY_WORMHOLE, value)}\n                        helperText=\"Distance modifier for wormhole systems without planets.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_EMPTY_WORMHOLE, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Wormholes With a Planet\"\n                        num_value={this.props.values.DISTANCE_MOD_PLANET_WORMHOLE}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_PLANET_WORMHOLE, value)}\n                        helperText=\"Distance modifier for wormhole systems with a planet.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_PLANET_WORMHOLE, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Nebula\"\n                        num_value={this.props.values.DISTANCE_MOD_NEBULA}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_NEBULA, value)}\n                        helperText=\"Distance modifier for nebula systems.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_NEBULA, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Opponent Adj Sys\"\n                        num_value={this.props.values.DISTANCE_MOD_ADJACENT_TO_OPPONENT}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_ADJACENT_TO_OPPONENT, value)}\n                        helperText=\"Distance modifier for systems adjacent to your opponents' home systems.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_ADJACENT_TO_OPPONENT, value)}\n                    />\n                    <h4>System Value Multipliers Based on Modified Distance</h4>\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of <1\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[0]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 0)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 0 or less.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 1\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[1]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 1)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 1.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 2\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[2]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 2)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 2.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 3\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[3]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 3)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 3.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 4\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[4]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 4)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 4.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 5\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[5]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 5)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 5.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 6\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[6]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 6)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 6.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 7\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[7]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 7)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 7.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 8\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[8]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 8)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 8.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 9\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[9]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 9)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 9.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 10+\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[10]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 10)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is greater than 9.\"\n                    />\n                </div>\n            </div>\n        );\n    }\n}","import React from 'react';\nimport $ from 'jquery';\n\nimport {\n    JSONDownloadButton,\n    JSONUploadButton,\n} from \"../download-helpers\";\nimport {BaseEditor} from \"./base-editor\";\nimport {EvaluatorForm, EVAL_ASPECTS} from '../evaluator-components';\nimport default_evaluators from '../data/default_evaluators.json';\nimport ls from \"local-storage\";\n\nwindow.jQuery = $;\n\nexport class EvaluationEditor extends BaseEditor {\n    constructor(props) {\n        super(props);\n        this.default_evaluators = default_evaluators;\n        this.state.values = Object.assign({}, this.default_evaluators[0].data);\n    }\n\n    changeHandler(which_aspect, value, distance) {\n        let new_values = Object.assign(this.state.values);\n        if(which_aspect === EVAL_ASPECTS.DISTANCE_MULTIPLIER) {\n            new_values[which_aspect][distance] = value;\n        } else {\n            new_values[which_aspect] = value;\n        }\n        this.setState({\"values\": new_values});\n    }\n\n    setValues(new_values) {\n        this.setState({\n            \"values\": Object.assign({}, new_values),\n        });\n    }\n\n    isSelectNew(selected_item=null) {\n        if(selected_item !== null) return selected_item===\"new\";\n        return this.getSelectValue() === \"new\";\n    }\n\n    getNewStringValue() {\n        return \"new\";\n    }\n\n    handleSelectChange() {\n        let new_value = this.getSelectValue();\n        if(new_value === \"new\") {\n            this.setValuesFull(Object.assign({}, this.default_evaluators[0]));\n        } else {\n            let valIndex = parseInt(new_value);\n            this.setValuesFull(Object.assign({}, this.state.saved_data[valIndex]), new_value);\n        }\n    }\n\n    setValuesFull(data, selected_item=\"new\", new_eval=null) {\n        if(new_eval===null) new_eval = data.data;\n        let loadedTitle = data.title;\n        let new_message = this.props.subject+\" '\"+loadedTitle+\"' displayed.\";\n        this.setValues(new_eval);\n        this.setState({\n            \"message\": new_message,\n            \"input_title\": loadedTitle,\n            \"selected_item\": selected_item.toString(),\n        });\n    }\n\n    getCurrentLayoutJSON() {\n        let l_title = \"Untitled Evaluator\";\n        if($('#layout-title').val() !== '') {\n            l_title = $('#layout-title').val();\n        }\n        return {\n            \"title\": l_title,\n            \"data\": Object.assign(this.state.values),\n        };\n    }\n\n    deleteAll() {\n        ls.remove(this.props.storage_key);\n        this.setValuesFull(Object.assign({}, this.default_evaluators[0]));\n        this.setState({\n            \"saved_data\": ls.get(this.props.storage_key) || [],\n            \"selected_item\": this.getNewStringValue(),\n            \"input_title\": \"\",\n            \"message\": \"All saved \"+this.props.subject_plural+\" have been deleted.\",\n        });\n    }\n\n    deleteCurrent() {\n        let currentIndex = this.getSelectValue();\n        let saved_data = Object.assign([], this.state.saved_data);\n        let toDel = saved_data.splice(parseInt(currentIndex), 1)[0];\n        ls.set(this.props.storage_key, saved_data);\n        this.setValuesFull(Object.assign(this.default_evaluators[0]));\n        this.setState({\n            \"input_title\": \"\",\n            \"selected_item\": this.getNewStringValue(),\n            \"message\": this.props.subject+\" '\"+toDel.title+\"' deleted.\",\n            \"saved_data\": ls.get(this.props.storage_key) || [],\n        });\n    }\n\n    loadDefault(index) {\n        let toLoad = this.default_evaluators[index];\n        let new_values = toLoad.data;\n        let loadedTitle = toLoad.title;\n        let new_message = \"Default evaluator '\"+loadedTitle+\"' displayed.\";\n        this.setValues(new_values);\n        this.setState({\n            \"message\": new_message,\n            \"input_title\": loadedTitle,\n            \"selected_item\": this.getNewStringValue(),\n        });\n    }\n\n    addLayoutsFromJSON(data) {\n        if(data.length>0) {\n            let saved_data = Object.assign([], this.state.saved_data);\n            for(let dataToSave of data) {\n                saved_data.push(dataToSave);\n            }\n            ls.set(this.props.storage_key, saved_data);\n            this.setValuesFull(saved_data[saved_data.length-1], saved_data.length-1);\n            this.setState({\n                \"saved_data\": ls.get(this.props.storage_key) || [],\n                \"message\": \"Evaluators loaded.\",\n                \"selected_item\": saved_data.length-1,\n                \"input_title\": saved_data[saved_data.length-1].title,\n            });\n        } else {\n            this.setState({\"message\": \"There were no \"+this.props.subject_plural+\" to load.\"})\n        }\n    }\n\n    render() {\n        let options = [(<option value=\"new\" key=\"new\">New Evaluator</option>)];\n        for(let [index, one_saved] of this.state.saved_data.entries()) {\n            options.push(\n                <option value={index} key={index}>{one_saved.title}</option>\n            );\n        }\n        let defaults = [];\n        for(let [index, one_default] of this.default_evaluators.entries()) {\n            defaults.push(\n                <p className=\"control\" key={index}>\n                    <button\n                        className=\"button is-small is-link\"\n                        onClick={()=>this.loadDefault(index)}\n                        key={\"default_layout_\"+index}\n                    >\n                        {one_default.title}\n                    </button>\n                </p>\n            )\n        }\n        let message = null;\n        if(this.state.message !== null && this.state.message!==\"\") {\n            message = (<blockquote>{this.state.message}</blockquote>);\n        }\n\n        return(\n            <div className=\"block\">\n                <h2 className=\"title is-size-4\">Evaluator Editor</h2>\n                <div className=\"block map-lab-control-panel\">\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Default Evaluators:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                {defaults}\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Saved Evaluators:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                <p className=\"control\">\n                                    <span className=\"select is-small\">\n                                        <select\n                                            id=\"layout-select\"\n                                            value={this.state.selected_item}\n                                            onChange={()=>this.handleSelectChange()}\n                                        >\n                                            {options}\n                                        </select>\n                                    </span>\n                                </p>\n                                <p className=\"control\">\n                                    <JSONDownloadButton\n                                        title=\"Download All\"\n                                        getDownloadInfo={()=>this.getAllLayoutJSONFileInfo()}\n                                        className=\"button is-small\"\n                                    />\n                                </p>\n                                <p className=\"control\">\n                                    <button onClick={()=>this.deleteAll()} className=\"button is-small\">\n                                        Delete All\n                                    </button>\n                                </p>\n                                <p className=\"control\">\n                                    <JSONUploadButton\n                                        id=\"layout-json-upload\"\n                                        title=\"Upload\"\n                                        handleJSON={(data)=>this.addLayoutsFromJSON(data)}\n                                        className=\"button is-small\"\n                                    />\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Evaluator Title:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                <p className=\"control\">\n                                    <input\n                                        type=\"text\"\n                                        id=\"layout-title\"\n                                        value={this.state.input_title}\n                                        className=\"input is-small\"\n                                        onChange={function() {\n                                            this.setState(\n                                                {\n                                                    \"input_title\": document.getElementById(\"layout-title\").value,\n                                                    \"message\": \"\"\n                                                }\n                                            );\n                                        }.bind(this)}\n                                    />\n                                </p>\n                                <p className=\"control\">\n                                    <button className=\"button is-small\" onClick={()=>this.saveCurrent()}>Save</button>\n                                </p>\n                                <p className=\"control\">\n                                    <button className=\"button is-small\" onClick={()=>this.handleSelectChange()}>Reset</button>\n                                </p>\n                                <p className=\"control\">\n                                    <button\n                                        onClick={()=>this.deleteCurrent()}\n                                        disabled={this.isSelectNew(this.state.selected_item)}\n                                        className=\"button is-small\"\n                                    >Delete</button>\n                                </p>\n                                <p className=\"control\">\n                                    <JSONDownloadButton\n                                        title=\"Download\"\n                                        getDownloadInfo={()=>this.getCurrentLayoutJSONFileInfo()}\n                                        className=\"button is-small\"\n                                    />\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"block content for-message\">\n                        {message}\n                    </div>\n                </div>\n                <EvaluatorForm\n                    values={this.state.values}\n                    changeHandler={(which_aspect, value, distance)=>this.changeHandler(which_aspect, value, distance)}\n                />\n            </div>\n        );\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from './serviceWorker';\n\nimport \"./styles/map-lab.scss\";\nimport {MapEditor} from \"./editors/map-editor\";\nimport {LayoutEditor} from './editors/layout-editor';\nimport {EvaluationEditor} from \"./editors/eval-editor\";\n\nimport $ from \"jquery\";\nwindow.jQuery = $;\n\nconst SCREENS = {\n    \"MAP_EDITOR\": 1,\n    \"LAYOUT_EDITOR\": 2,\n    \"SYSTEM_EVALUATOR\": 3,\n    \"INSTRUCTIONS\": 4,\n};\n\nfunction toggleMenu() {\n    $(\".navbar-burger\").toggleClass(\"is-active\");\n    $(\".navbar-menu\").toggleClass(\"is-active\");\n}\n\n\nclass MapLabNavigator extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            \"active_screen\": SCREENS.MAP_EDITOR,\n        };\n    }\n\n    changeScreen(new_screen) {\n        this.setState({\n            \"active_screen\": new_screen,\n        });\n    }\n\n    render() {\n        let screen_return = null;\n        switch(this.state.active_screen) {\n            case SCREENS.MAP_EDITOR:\n                screen_return = (\n                    <MapEditor\n                        storage_key=\"maps\"\n                        subject=\"Map\"\n                        subject_plural=\"Maps\"\n                        layout_storage_key=\"layouts\"\n                        eval_storage_key=\"evaluators\"\n                    />\n                );\n                break;\n            case SCREENS.LAYOUT_EDITOR:\n                screen_return = (\n                    <LayoutEditor\n                        storage_key=\"layouts\"\n                        subject=\"Layout\"\n                        subject_plural=\"Layouts\"\n                    />\n                );\n                break;\n            case SCREENS.SYSTEM_EVALUATOR:\n                screen_return = (\n                    <EvaluationEditor\n                        storage_key=\"evaluators\"\n                        subject=\"Evaluator\"\n                        subject_plural=\"Evaluators\"\n                    />\n                );\n                break;\n            case SCREENS.INSTRUCTIONS:\n                screen_return = (\n                    <div class=\"block content\">\n                        <h2>Instructions</h2>\n                        <p>Yo.</p>\n                    </div>\n                );\n                break;\n            default:\n                break;\n        }\n\n\n        return(\n            <div className=\"block map-lab\">\n                <nav className=\"navbar is-primary\">\n                    <div className=\"navbar-brand\">\n                        <h1 className=\"title is-3 is-marginless\">TI4 Map Lab</h1>\n                        {/*eslint-disable-next-line*/}\n                        <a\n                            role=\"button\"\n                            className=\"navbar-burger is-\"\n                            aria-label=\"menu\"\n                            aria-expanded=\"false\"\n                            onClick={()=>toggleMenu()}\n                        >\n                            <span aria-hidden=\"true\"></span>\n                            <span aria-hidden=\"true\"></span>\n                            <span aria-hidden=\"true\"></span>\n                        </a>\n                    </div>\n                    <div className=\"navbar-menu\">\n                        <div className=\"navbar-start\">\n                        </div>\n                            <div className=\"navbar-end\">\n                                {/*eslint-disable-next-line*/}\n                                <a role=\"button\"\n                                    disabled={this.state.active_screen===SCREENS.INSTRUCTIONS}\n                                    onClick={()=>this.changeScreen(SCREENS.INSTRUCTIONS)}\n                                    className=\"navbar-item\"\n                                >\n                                    Instructions\n                                </a>\n                                {/*eslint-disable-next-line*/}\n                                <a role=\"button\"\n                                    disabled={this.state.active_screen===SCREENS.MAP_EDITOR}\n                                    onClick={()=>this.changeScreen(SCREENS.MAP_EDITOR)}\n                                    className=\"navbar-item\"\n                                >\n                                    Map Editor\n                                </a>\n                                {/*eslint-disable-next-line*/}\n                                <a role=\"button\"\n                                    disabled={this.state.active_screen===SCREENS.LAYOUT_EDITOR}\n                                    onClick={()=>this.changeScreen(SCREENS.LAYOUT_EDITOR)}\n                                    className=\"navbar-item\"\n                                >\n                                    Layout Editor\n                                </a>\n                                {/*eslint-disable-next-line*/}\n                                <a role=\"button\"\n                                    disabled={this.state.active_screen===SCREENS.SYSTEM_EVALUATOR}\n                                    onClick={()=>this.changeScreen(SCREENS.SYSTEM_EVALUATOR)}\n                                    className=\"navbar-item\"\n                                >\n                                    System Evaluator\n                                </a>\n                        </div>\n                    </div>\n                </nav>\n                {screen_return}\n                <div className=\"block footer\">\n                    This is a fan project by J. Arthur Ellis.&nbsp;\n                    <a href=\"https://twitter.com/joepinion\">@joepinion</a>\n                    <br /><a href=\"https://www.github.com/joepinion/ti4-map-lab\">github.com/joepinion/ti4-map-lab</a>\n                </div>\n            </div>\n        );\n    }\n\n}\n\nReactDOM.render(\n    <MapLabNavigator />,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n"],"sourceRoot":""}